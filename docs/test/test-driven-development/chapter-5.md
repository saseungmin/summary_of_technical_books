---
sidebar_position: 6
sidebar_label: 5. 솔직히 말하자면
---

# 🌈 Chapter 5: 솔직히 말하자면
어떤 작은 단계를 밟으면 초록 막대에 이를 수 있을까? `Dollar` 코드를 복사해서 `Dollar`를 `Franc`으로 바꾸면 어떨까.   

잠깐. 여러분 중에 심미적 취향을 가진 일부가 비웃으며 야유하는 소리가 들린다. 복사와 붙여넣기를 통한 재사용? 추상화의 종언? 깨끗한 설계의 킬러?   
흥분했다면, 기분을 전환하는 숨을 쉬어라. 우리 주기에는 서로 다른 단계들이 있다는 것을 기억하라

1. 테스트 작성.
2. 컴파일되게 하기.
3. 실패하는지 확인하기 위해 실행.
4. 실행하게 만듦.
5. 중복 제거.

각 단계에는 서로 다른 목적이 있다. 다른 스타일의 해법, 다른 미적 시간을 필요로 한다. 처음 네 단계는 빨리 진행해야 한다. 그러면 새 기능이 포함되더라도 잘 알고 있는 상태에 이를 수 있다.   

주기의 다섯 번째 단계 없이는 앞의 네 단계도 제대로 되지 않는다. 적절한 시기에 적절한 설계를. 돌아가게 만들고, 올바르게 만들어라.   
코드에서 중복을 제거하기 전까지는 자신의 코드를 파트너를 제외한 어느 누구에게도 보여주려고 하지 않을 거라는 확신이 든다.

```java
class Franc {
  private int amount;

  Franc(int amount) {
    this.amount = amount;
  }

  Franc times(int multiplier) {
    return new Franc(amount * multiplier);
  }

  public boolean equals(Object object) {
    Franc franc = (Franc) object;
    return amount == franc.amount;
  }
}
```

코드를 실행시키기까지의 단계가 짧았기 때문에 "컴파일되기 하기" 단계도 넘어갈 수 있었다.   
중복이 엄청나게 많기 때문에 다음 테스트를 작성하기 전에 이것들을 제거해야 한다. `equals()`를 일반화하는 것부터 시작하자.   

검토해보면 우리는
- 큰 테스트를 공략할 수 없다. 그래서 진전을 나타낼 수 있는 자그마한 테스트를 만들었다.
- 뻔뻔스럽게도 중복을 만들고 조금 고쳐서 테스트를 작성했다.
- 설사가상으로 모델 코드까지 도매금으로 복사하고 수정해서 테스트를 통과했다.
- 중복이 사라지기 전에는 집에 가지 않겠다고 약속했다.
