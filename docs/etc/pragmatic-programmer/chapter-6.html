<!doctype html>
<html lang="ko" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-etc/pragmatic-programmer/chapter-6" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">🤔 Chapter 6: 동시성 | Summary of Technical Books</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://saseungmin.github.io/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-6"><meta data-rh="true" property="og:locale" content="ko"><meta data-rh="true" name="docusaurus_locale" content="ko"><meta data-rh="true" name="docsearch:language" content="ko"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="🤔 Chapter 6: 동시성 | Summary of Technical Books"><meta data-rh="true" name="description" content="동시성은 둘 이상의 코드 조각이 실행될 때 동시에 실행 중인 것처럼 행동하는 것이다. 그리고 병렬성이란 실제로 동시에 실행되는 것이다."><meta data-rh="true" property="og:description" content="동시성은 둘 이상의 코드 조각이 실행될 때 동시에 실행 중인 것처럼 행동하는 것이다. 그리고 병렬성이란 실제로 동시에 실행되는 것이다."><link data-rh="true" rel="icon" href="/summary_of_technical_books/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://saseungmin.github.io/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-6"><link data-rh="true" rel="alternate" href="https://saseungmin.github.io/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-6" hreflang="ko"><link data-rh="true" rel="alternate" href="https://saseungmin.github.io/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-6" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://RY4L2YN43F-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-VJSDQ25SYT","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VJSDQ25SYT"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-VJSDQ25SYT",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="Summary of Technical Books" href="/summary_of_technical_books/opensearch.xml">

<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@3"></script><link rel="stylesheet" href="/summary_of_technical_books/assets/css/styles.bdcea6b7.css">
<script src="/summary_of_technical_books/assets/js/runtime~main.03001369.js" defer="defer"></script>
<script src="/summary_of_technical_books/assets/js/main.8070e37a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="본문으로 건너뛰기"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">본문으로 건너뛰기</a></div><nav aria-label="메인" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="사이드바 펼치거나 접기" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/summary_of_technical_books/"><div class="navbar__logo"><img src="/summary_of_technical_books/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/summary_of_technical_books/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Summary of Books</b></a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/javascript/table-of-contents">자바스크립트</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/typescript/table-of-contents">타입스크립트</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/agile/table-of-contents">애자일</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/object-oriented/table-of-contents">객체지향</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/functional/table-of-contents">함수형</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/test/table-of-contents">테스트</a><a class="navbar__item navbar__link" href="/summary_of_technical_books/docs/etc/table-of-contents">기타</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/saseungmin/summary_of_technical_books" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-label="어두운 모드와 밝은 모드 전환하기 (현재 밝은 모드)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="검색"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">검색</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="맨 위로 스크롤하기" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="문서 사이드바" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/summary_of_technical_books/docs/intro">책 목록</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/javascript/table-of-contents">자바스크립트</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/typescript/table-of-contents">타입스크립트</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/agile/table-of-contents">애자일</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/object-oriented/table-of-contents">객체지향</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/functional/table-of-contents">함수형</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/summary_of_technical_books/docs/test/table-of-contents">테스트</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/summary_of_technical_books/docs/etc/table-of-contents">기타</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/table-of-contents">🚀 책 목록</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/summary_of_technical_books/docs/etc/clean-code/table-of-contents">클린 코드: 애자일 소프트웨어 장인 정신</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/table-of-contents">실용주의 프로그래머</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/table-of-contents">🚀 목차</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-1">🤔 Chapter 1: 실용주의 철학</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-2">🤔 Chapter 2: 실용주의 접근법</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-3">🤔 Chapter 3: 기본 도구</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-4">🤔 Chapter 4: 실용주의 편집증</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-5">🤔 Chapter 5: 구부러지거나 부러지거나</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-6">🤔 Chapter 6: 동시성</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-7">🤔 Chapter 7: 코딩하는 동안</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-8">🤔 Chapter 8: 프로젝트 전에</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-9">🤔 Chapter 9: 실용주의 프로젝트</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/summary_of_technical_books/docs/etc/fluent-react/table-of-contents">전문가를 위한 리액트</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/summary_of_technical_books/docs/etc/inspired/table-of-contents">인스파이어드</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/summary_of_technical_books/docs/etc/pro-git-2/table-of-contents">Pro Git 2판</a></div></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="홈" class="breadcrumbs__link" href="/summary_of_technical_books/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">기타</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">실용주의 프로그래머</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">🤔 Chapter 6: 동시성</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">이 페이지에서</button></div><div class="theme-doc-markdown markdown"><header><h1>🤔 Chapter 6: 동시성</h1></header>
<p>동시성은 둘 이상의 코드 조각이 실행될 때 동시에 실행 중인 것처럼 행동하는 것이다. 그리고 병렬성이란 실제로 동시에 실행되는 것이다.<br>
<!-- -->동시성을 얻으려면 실행 중에 코드의 다른 부분으로 실행을 전환할 수 있는 환경에서 코드를 구동해야 한다. 보통은 파이버(fiber)나 스레드, 프로세스 등을 사용하여 동시성을 구현한다.<br>
<!-- -->병렬성을 얻으려면 두 가지 일을 동시에 할 수 있는 하드웨어가 필요하다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-모든-일에-동시성이-있다">🥕 모든 일에 동시성이 있다<a href="#-모든-일에-동시성이-있다" class="hash-link" aria-label="🥕 모든 일에 동시성이 있다에 대한 직접 링크" title="🥕 모든 일에 동시성이 있다에 대한 직접 링크">​</a></h3>
<p>시스템의 규모가 어느 정도를 넘어가면 동시성을 고려하지 않고 코드를 작성하기란 거의 불가능하다. 동시성을 겉으로 드러날 때도 있지만 라이브러리 안에 묻혀 있는 경우도 있다. 여러분의 애플리케이션이 실제 세상을 다루기 원한다면 동시성은 필수다. 세상은 비동기적이기 때문이다. 만약 순차적으로 하 나를 끝낸 다음에 다음 일을 하는 식으로 수행한다면, 시스템은 거북이처럼 느리게 느껴질 것이고 프로그램을 구동하는 하드웨어의 성능도 최대로 활용하지 못할 것이다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-topic-33-시간적-결합-깨트리기">🍭 Topic 33. 시간적 결합 깨트리기<a href="#-topic-33-시간적-결합-깨트리기" class="hash-link" aria-label="🍭 Topic 33. 시간적 결합 깨트리기에 대한 직접 링크" title="🍭 Topic 33. 시간적 결합 깨트리기에 대한 직접 링크">​</a></h2>
<p>소프트웨어 아키텍처에서 시간이라는 측면은 자주 무시된다. 우리가 신경쓰는 유일한 시간은 일정, 바로 출시까지 남은 시간뿐이다. 하지만 여기서 이야기할 것은 이런 종류의 시간이 아니다. 시간에는 우리가 신경 써야 할 측면이 두 가지 있는데, 동시성(동시에 일어나는 일들)과 순서(시간의 흐름 속에서 일들의 상대적인 위치)다.</p>
<p>우리는 보통 프로그래밍할 때 두 측면 모두 특별히 신겨 쓰지 않는다. 메서드 A는 언제나 메서드 B보다 먼저 호출해야 한다. 보고서는 한 번에 오직 하나만 생성할 수 있다. 버튼 클릭을 처리하려면 먼저 화면이 갱신되어야 한다.</p>
<p>이러한 접근 방법은 그다지 유연하지 않고 현실과도 동떨어져 있다.<br>
<!-- -->우리는 동시성을 확보해야 한다. 시간이나 순서에 의존하는 시간적 결합을 끊는 방법을 생각해 내야 한다. 그렇게 함으로써 유연성도 얻을 수 있고, 작업 흐름 분석과 아키텍처, 설계, 배포와 같은 개발의 여러 측면에서 시간과 관련된 의존성도 함께 줄일 수 있다. 결과적으로 분석하기 더 쉽고 응답속도도 더 빠르며 더 안정적인 시스템을 만들 수 있을 것이다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-동시성-찾기">🥕 동시성 찾기<a href="#-동시성-찾기" class="hash-link" aria-label="🥕 동시성 찾기에 대한 직접 링크" title="🥕 동시성 찾기에 대한 직접 링크">​</a></h3>
<p>우리는 동시에 <strong>일어나도 되는</strong> 게 뭐고, 반드시 순서대로 <strong>일어나야 하는</strong> 건 어떤 것인지 찾아내길 원한다. &quot;활동 다이어그램&quot; 같은 표기법을 사용해서 작업 흐름을 그록하는 것이 한 방법이다.</p>
<blockquote>
<p><strong>TIP 56. 작업 흐름 분석으로 동시성을 개선하라.</strong></p>
</blockquote>
<p>활동 다이어그램을 사용하면 동시에 <strong>수행할 수도 있는데도</strong> 아직 동시에 하고 있지 않은 활동들을 찾아내서 병렬성을 극대화할 수 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-동시-작업의-기회">🥕 동시 작업의 기회<a href="#-동시-작업의-기회" class="hash-link" aria-label="🥕 동시 작업의 기회에 대한 직접 링크" title="🥕 동시 작업의 기회에 대한 직접 링크">​</a></h3>
<p>활동 다이어그램은 동시에 작업할 수 있는 부분들을 보여 준다. 하지만 진짜로 동시에 하는 것이 좋은지는 알려주지 않는다. 그래서 설계가 필요하다.<br>
<!-- -->우리는 시간이 걸리지만, 우리 코드가 아닌 곳에서 시간이 걸리는 활동을 찾고 싶다. 데이터베이스를 조회할 때나 외부 서비스에 접근할 때, 사용자 입력을 기다릴 때 같이 우리 프로그램이 다른 작업이 끝나기를 기다려야 하는 상황 말이다. 이런 순간이 바로 CPU가 손가락만 빨면서 기다리는 대신 좀 더 생산적인 일을 할 수 있는 기회다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-병렬-작업의-기회">🥕 병렬 작업의 기회<a href="#-병렬-작업의-기회" class="hash-link" aria-label="🥕 병렬 작업의 기회에 대한 직접 링크" title="🥕 병렬 작업의 기회에 대한 직접 링크">​</a></h3>
<p>컴퓨터 한 대에 있든 아니면 연결된 여러 대에 있든 우리에게 여러 개의 프로세서가 있다면, 그리고 작업을 프로세서들에게 나누어 줄 수 있다면 전체 소요 시간을 단축할 수 있다.<br>
<!-- -->이런 식으로 나누기에 가장 이상적인 것은 비교적 독립적인 부분 작업들이다. 다른 부분 작업을 기다릴 필요 없이 진행할 수 있으면 좋다. 일반적인 형태는 커다란 작업을 독립적인 부분들로 쪼개서 별렬로 각각 처리한 다음, 결과를 합치는 것이다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-기회를-찾아-내는-것은-쉽다">🥕 기회를 찾아 내는 것은 쉽다<a href="#-기회를-찾아-내는-것은-쉽다" class="hash-link" aria-label="🥕 기회를 찾아 내는 것은 쉽다에 대한 직접 링크" title="🥕 기회를 찾아 내는 것은 쉽다에 대한 직접 링크">​</a></h3>
<p>여러분의 애플리케이션으로 돌아가자. 동시 작업이나 병렬 작업을 해서 이득을 볼 수 있는 부분을 찾았다. 이제 어려운 부분이 남았다. 어떻게 안전하게 구현할 수 있을까?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-topic-34-공유-상태는-틀린-상태">🍭 Topic 34. 공유 상태는 틀린 상태<a href="#-topic-34-공유-상태는-틀린-상태" class="hash-link" aria-label="🍭 Topic 34. 공유 상태는 틀린 상태에 대한 직접 링크" title="🍭 Topic 34. 공유 상태는 틀린 상태에 대한 직접 링크">​</a></h2>
<p>여러분이 가장 좋아하는 레스토랑에 방문했다. 메인 요리를 모두 먹은 후 종업원에게 혹시 애플파이가 남아 있는지 묻는다. 종업원은 어꺠 넘어를 돌아보더니 진영장에 한 조각이 남아 있는 것을 확인하고는 그렇다고 대답한다. 여러분은 주문을 마치고 안도의 한숨을 내쉰다.<br>
<!-- -->한편 레스토랑의 반대쪽에서도 다른 고객이 종업원에게 같은   질문을 하고 있다. 이 종업원도 진열장을 쳐다보고는 한 조각이 있는 것을 확인하고 주문을 받는다. 두 고객 중 한 명은 실망하게 될 것이다.</p>
<blockquote>
<p><strong>Tip 57. 공유 상태는 틀린 상태다.</strong></p>
</blockquote>
<p>문제는 상태가 공유된 것이다. 레스토랑의 종업원들은 서로를 고려하지 않고 진열장만 확인했다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-비-원자적-갱신">🥕 비-원자적 갱신<a href="#-비-원자적-갱신" class="hash-link" aria-label="🥕 비-원자적 갱신에 대한 직접 링크" title="🥕 비-원자적 갱신에 대한 직접 링크">​</a></h3>
<p>종업원1이 현재 파이 조각 수를 조회하고, 1을 얻는다. 그러고는 고객에게 파이를 약속한다. 하지만 이 시점에 종업원2도 작업을 시작한다. 역시 파이 조각 수를 조회하여 1을 얻고, 고객에게 똑같은 약속을 한다. 둘 중 하나가 마지막 남은 파이 조각을 획득하고, 다른 종업원은 일종의 예외 상태에 빠진다.</p>
<p>여기서 문제는 두 프로세스가 같은 메모리 영역을 쓰기가 가능하다는 점이 아니다. 문제는 어느 프로세스도 자신이 보는 메모리가 일관되어 있음을 보장할 수 없다는 점이다. 이것은 모두 파이 조각을 가져오고 갱신하는 동안이 원자적이지 않기 떄문이다. 실제 값이 그사이에 바뀔 수 있다. 그렇다면 어떻게 원자적으로 바꿀 수 있을까?</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="세마포어-및-다른-상호-배제-방법">세마포어 및 다른 상호 배제 방법<a href="#세마포어-및-다른-상호-배제-방법" class="hash-link" aria-label="세마포어 및 다른 상호 배제 방법에 대한 직접 링크" title="세마포어 및 다른 상호 배제 방법에 대한 직접 링크">​</a></h4>
<p>세마포어는 단순히 한 번에 한 사람만이 가질 수 있는 <strong>무언가</strong>다. 여러분은 세마포어를 만들어서 다른 리소스의 사용을 제어하는 데 쓸 수 있다.</p>
<p>레스토랑에서는 물리적인 세마포어로 파이 문제를 해결하기로 했다. 진열장 위에 도깨비 인형을 하나 올려 둔다. 모든 종업원은 파이 주문을 받기 전에 도깨비 인형을 손에 넣어야 한다. 주문을 받고 파이를 접시에 담아 고객에게 낸 후에는 도깨비 인형을 보물 파이를 지키는 원래 위치에 되돌려 놓는다. 다음 주문을 받을 수 있도록 말이다.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">case_semaphore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> display_case</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pie_count </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  promise_pie_to_customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  display_case</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">take_pie</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  give_pie_to_customer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">case_semaphore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unlock</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>두 종업원이 동시에 코드를 실행시켰다고 가정해 보자. 둘 다 세마포어를 얻으려고(lock) 시도하지만 한 명만 성공한다. 세마포어를 확보한 쪽은 평소처럼 계속 진행한다. 세마포어를 얻지 못한 쪽은 세마포어를 얻을 수 있을 때까지 멈춰 있는다. 즉, 기다린다. 첫 번째 종업원이 주문을 완료하고 세마포어의 잠금을 해제하면 다른 종업원이 실행을 재개한다.</p>
<p>이 접근 방식에는 몇 가지 문제가 있다. 가장 큰 문제는 진영장에 접근하는 모든 사람이 빠짐없이 세마포어를 사용해야만 제대로 동작한다는 것이다. 만약 누군가가 깜빡한다면, 다시 말해서 어떤 개발자가 약속을 지키지 않는 코드를 쓴다면 다시 혼돈에 빠진다.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="리소스를-트랜잭션으로-관리하라">리소스를 트랜잭션으로 관리하라<a href="#리소스를-트랜잭션으로-관리하라" class="hash-link" aria-label="리소스를 트랜잭션으로 관리하라에 대한 직접 링크" title="리소스를 트랜잭션으로 관리하라에 대한 직접 링크">​</a></h4>
<p>현재의 설계가 미흡한 것은 진열장 사용을 보호할 책임을 진열장을 사용하는 사람에게 전가하기 때문이다. 제어를 중앙으로 집중시키자. 그러려면 API를 바꿔서 종업원이 하나의 호출로 파이 조각 수를 확인함과 동시에 파이 조각을 가져가도록 만들어야 한다.</p>
<div class="language-ruby codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-ruby codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token method-definition function" style="color:#d73a49">get_pie_if_available</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token variable" style="color:#36acaa">@case_semaphore</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">protect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@slices</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      update_sales_data</span><span class="token punctuation" style="color:#393A34">(</span><span class="token symbol" style="color:#36acaa">:pie</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">@slices</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">shift</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">end</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="클립보드에 코드 복사" title="복사" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-트랜잭션이-없는-갱신">🥕 트랜잭션이 없는 갱신<a href="#-트랜잭션이-없는-갱신" class="hash-link" aria-label="🥕 트랜잭션이 없는 갱신에 대한 직접 링크" title="🥕 트랜잭션이 없는 갱신에 대한 직접 링크">​</a></h3>
<p>공유 메모리는 동시성 문제의 원인으로 많이 지목받는다. 하지만 사실 수정 가능한 리소스를 공유하는 애플리케이션 코드 <strong>어디에서나</strong> 동시성 문제가 발생할 수 있다. 여러분 코드의 인스턴스 둘 이상이 파일, 데이터베이스, 외부 서비스 등 어떤 리소스에 동시에 접근할 수 있다면 여러분은 잠재적인 문제를 안고 있는 것이다.</p>
<blockquote>
<p><strong>Tip 58. 불규칙한 실패는 동시성 문제인 경우가 많다.</strong></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-그-밖의-독점적인-접근">🥕 그 밖의 독점적인 접근<a href="#-그-밖의-독점적인-접근" class="hash-link" aria-label="🥕 그 밖의 독점적인 접근에 대한 직접 링크" title="🥕 그 밖의 독점적인 접근에 대한 직접 링크">​</a></h3>
<p>대부분의 언어에는 공유 리소스에 독접적으로 접근하는 것을 도와주는 라이브러리가 있다. 상호 배제를 의미하는 뮤텍스라고 부르기도 하고, 모니터나 세마포어라고 부르기도 한다. 모두 라이브러리로 제공된다.</p>
<p>언어 자체에 동시성 지원이 들어 있는 언어도 있다. 예를 들어 러스트는 데이터의 소유권이라는 개념을 강제한다. 변경 가능한 데이터 조각은 어느 한 시점에 단 하나의 변수나 매개 변수만 참조를 가질 수 있다.</p>
<p>함수형 언어들은 모든 데이터를 변경 불가능하게 만드는 경향이 있으므로 동시성 문제를 단순하게 만든다고 주장할 수도 있겠다. 하지만 함수형 언어도 언젠가는 모든 것이 변경 가능한 진짜 세상에 발을 들여야 하므로 똑같은 문제를 겪는 순간이 올 것이다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-의사-선생님-아파요">🥕 의사 선생님, 아파요.....<a href="#-의사-선생님-아파요" class="hash-link" aria-label="🥕 의사 선생님, 아파요.....에 대한 직접 링크" title="🥕 의사 선생님, 아파요.....에 대한 직접 링크">​</a></h3>
<p>혹시 이번 항목에서 얻어 가는 것이 없다면 이것만은  기억하기를 바란다. 리소스를 공유하는 환경에서 동시성은 어렵다. 이문제를 직접 풀려고 한다면 고난의 연속일 것이다.</p>
<p>그래서 다음 오래된 농담을 음미해보기를 추천하는 것이다.</p>
<blockquote>
<p>의사 선생님, 이렇게 하면 아파요.<br>
<!-- -->그러면 그렇게 하지 마세요.</p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-topic-35-액터와-프로세스">🍭 Topic 35 액터와 프로세스<a href="#-topic-35-액터와-프로세스" class="hash-link" aria-label="🍭 Topic 35 액터와 프로세스에 대한 직접 링크" title="🍭 Topic 35 액터와 프로세스에 대한 직접 링크">​</a></h2>
<p>액터와 프로세스를 사용하면 흥미로운 방식으로 동시성을 구현할 수 있다. 공유 메모리 접근을 동기화하느라 고생할 필요도 없다.</p>
<ul>
<li>액터는 자신만의 비공개 지역 상태를 가진 독립적인 가상 처리 장치다. 각 액터는 우편함을 하나씩 보유하고 있다. 액터가 잠자고 있을 때 우편함에 메시지가 도착하면 액터가 깨어나면서 메시지를 처리한다. 처리가 끝나면 우편함의 다른 메시지를 처리한다. 만약 우편함이 비어 있으면 다시 잠든다. 메시지를 처리할 때 액터는 다른 액터를 생성하거나, 알고 있는 다른 액터에게 메시지를 보내거나, 다음 메시지를 처리할 때의 상태가 될 새로운 상태를 생성할 수 있다.</li>
<li>프로세스는 본래 더 일반적인 가상 처리기로, 보통 운영 체제가 동시성을 지원하기 위하여 구현한다. 프로세스를 사용할 때 마치 액터처럼 동작하도록 관례를 만들어 제한적으로만 사용할 수도 있는데, 이번 항목에서 이야기하는 프로세스란 바로 이렇게 제한한 것을 말한다.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-액터는-언제나-동시성을-띤다">🥕 액터는 언제나 동시성 을 띤다<a href="#-액터는-언제나-동시성을-띤다" class="hash-link" aria-label="🥕 액터는 언제나 동시성을 띤다에 대한 직접 링크" title="🥕 액터는 언제나 동시성을 띤다에 대한 직접 링크">​</a></h3>
<p>액터의 정의에서 찾아볼 수 <strong>없는</strong> 것이 몇 가지 있다.</p>
<ul>
<li>액터를 <strong>관리하는 것</strong>이 하나도 없다. 다음에 무엇을 하라고 계획을 세우거나, 정보를 입력 데이터에서 최종 결과로 바꾸는 과정을 <strong>조율하는 것</strong>이 없다.</li>
<li>시스템이 지정하는 상태는 <strong>오직</strong> 메시지 그리고 각 액터의 지역 상태뿐이다. 메시지는 수신자가 읽는 것 외에는 확인할 방법이 없고, 지역 상태는 액터 바깥에서는 접근이 불가능하다.</li>
<li>모든 메시지는 일방향이다. 답장이란 개념은 없다. 액터에서 답장을 받고 싶다면 처음 메시지를 보낼 때 답장 받을 우편함 주소를 메시지에 포함해서 보내야 한다. 나중에 이 주소로 보내는 답장도 결국 또 하나의 메시지일 뿐이다.</li>
<li>액터는 각 메시지를 끝날 때까지 처리하고 중간에 다른 일을 하지 않는다. 즉, 한 번에 하나의 메시지만 처리한다.</li>
</ul>
<p>그 결과 액터들은 아무것도 공유하지 않으면서 비동기적으로 동시에 실행된다. 물리적인 프로세서가 넉넉하다면 각각 액터를 하나씩 돌릴 수 있다. 프로세서가 하나뿐이라면 실행 환경이 액터마다 컨텍스트를 전환해 가면서 실행시킬 수 있다. 어느 쪽이든 액터에서 실행되는 코드는 동일하다.</p>
<blockquote>
<p><strong>Tip 59. 공유 상태 없는 동시성을 위하여 액터를 사용하라.</strong></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-간단한-액터">🥕 간단한 액터<a href="#-간단한-액터" class="hash-link" aria-label="🥕 간단한 액터에 대 한 직접 링크" title="🥕 간단한 액터에 대한 직접 링크">​</a></h3>
<p>예시는 책을 참고.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-드러나지-않는-동시성">🥕 드러나지 않는 동시성<a href="#-드러나지-않는-동시성" class="hash-link" aria-label="🥕 드러나지 않는 동시성에 대한 직접 링크" title="🥕 드러나지 않는 동시성에 대한 직접 링크">​</a></h3>
<p>액터 모델에서는 동시성을 다루는 코드를 쓸 필요가 없다. 공유된 상태가 없기 때문이다. 명시적으로 처음부터 끝까지 &quot;이걸 한 다음 저걸 하라&quot;는 코드를 쓸 필요도 없다. 액터가 수신하는 메시지에 따라 알아서 실행되기 떄문이다.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-topic-36-칠판">🍭 Topic 36. 칠판<a href="#-topic-36-칠판" class="hash-link" aria-label="🍭 Topic 36. 칠판에 대한 직접 링크" title="🍭 Topic 36. 칠판에 대한 직접 링크">​</a></h2>
<p>칠판 접근 방법의 몇 가지 주요 특징은 다음과 같다.</p>
<ul>
<li>형사들은 다른 형사의 존재를 알 필요가 없다. 형사들은 칠판을 보며 새로운 정보를 얻고, 자기가 발견한 것을 칠판에 덧붙인다.</li>
<li>형사들을 저마다 서로 다른 분야의 훈련을 받았거나, 다른 수준의 학력과 경험을 지녔을 수 있으며, 아예 같은 관할 구역에 속하지 않을 수도 있다. 사건을 해결하고 싶은 마음은 모두에게 있지만, 공통점은 그뿐이다.</li>
<li>수사 과정에서 여러 형사가 들어오거나 나갈 수 있고 임무 교대 시간도 제각기 다를 수 있다.</li>
<li>칠판에는 제한 없이 어떤 것이든 올릴 수 있다. 사진, 증언, 물리적 증거 등등.</li>
</ul>
<p>일종의 &quot;자유방임주의&quot;적 동시성이다. 각 형사는 독립된 프로세스, 에이전트, 액터 등과 같다. 누군가는 칠판에 수집한 사실을 붙이고, 누군가는 떼어 낸다. 사실을 조합하거나 처리할 수도 있고 더 많은 정보를 덧붙일 수도 있다. 칠판은 사람들이 서서히 결론에 도달하도록 돕는다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-칠판-사용-사례">🥕 칠판 사용 사례<a href="#-칠판-사용-사례" class="hash-link" aria-label="🥕 칠판 사용 사례에 대한 직접 링크" title="🥕 칠판 사용 사례에 대한 직접 링크">​</a></h3>
<p>주택 담보 대출이나 신용 대출 신청을 받아서 처리하는 프로그램을 작성한다고 가정해 보자. 이 분야를 관장하는 법은 정부, 금융위원회, 지방 자치 단체 모두 자신만의 규정이 있기 때문에 끔찍하게 복잡하다. 대출 기관은 자신이 몇몇 정보를 고지했다는 사실을 증명해야 하고, 어떤 정보를 달라고 요청해야 하는데, 어떤 질문을 하면 안 되는 등이다.<br>
<!-- -->준수해야 할 법이라는 골칫거리 외에도 우리가 씨름해야 할 문제들은 다음과 같다.</p>
<ul>
<li>응답은 정해진 순서 없이 도착한다. 예를 들어 신용 조회나 명의 확인 요청은 상당한 시간이 걸리지만, 이름이나 주소는 바로 확인할 수 있다.</li>
<li>여러 표준 시간대에 걸쳐 있는 여러 사무실에 분산된 여러 사람이 데이터를 수집할 수도 있다.</li>
<li>어떤 데이터 수집은 다른 시스템이 자동으로 해주기도 한다. 그러나 이 데이터도 비동기적으로 도착할 수 있다는 점은 마찬가지다.</li>
<li>그런 데다가 어떤 데이터는 다른 데이터에 의존하기까지 한다.</li>
<li>새로운 데이터가 도착하면 새로운 질문을 하거나 새로운 정책을 적용해야 할 수도 있다.</li>
</ul>
<p>칠판 시스템을 법적 요구 사항을 캡슐화하는 규칙 엔진과 함께 사용하면 이러한 어려움을 우아하게 해결할 수 있다. 데이터의 도착 순서는 이제 상관 없다. 어떤 사실이 칠판 에 올라가면 적절한 규칙이 발동되도록 하면 된다. 결과에 대한 피드백도 마찬가지로 쉽게 다룰 수 있다. 어떤 규칙에서 나온 것이든 그 결과를 다시 칠판에 올려서 다른 규칙들이 발동되도록 하면 된다.</p>
<blockquote>
<p><strong>Tip 60. 칠판으로 작업 흐름을 조율하라.</strong></p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-메시지-시스템과-칠판의-유사성">🥕 메시지 시스템과 칠판의 유사성<a href="#-메시지-시스템과-칠판의-유사성" class="hash-link" aria-label="🥕 메시지 시스템과 칠판의 유사성에 대한 직접 링크" title="🥕 메시지 시스템과 칠판의 유사성에 대한 직접 링크">​</a></h3>
<p>메시징 시스템을 칠판으로도 사용할 수 있고, 여러 액터를 실행하는 플랫폼으로도 사용할 수 있다는 것이다. 심지어 동시에 둘 모두를 사용할 수도 있다.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="-하지만-그렇게-간단하지-않다">🥕 하지만 그렇게 간단하지 않다...<a href="#-하지만-그렇게-간단하지-않다" class="hash-link" aria-label="🥕 하지만 그렇게 간단하지 않다...에 대한 직접 링크" title="🥕 하지만 그렇게 간단하지 않다...에 대한 직접 링크">​</a></h3>
<p>아키텍처에서 액터와 칠판, 마이크로서비스를 활용하면 애플리케이션에서 생길 수 있는 모든 종류의 동시성 문제를 예방할 수 있을 것이다. 하지만 거기에는 비용이 따른다. 이런 접근 방식을 사용하면 많은 동작이 간접적으로 일어나므로 분석이 더 힘들다. 메시지 형식 및 API를 모아두는 중앙 저장소를 운영하면 도움이 될 것이다. 이 저장소에서 코드나 문서까지 생성해 준다면 더욱 좋다. 시스템에서 처리하는 메시지나 정보를 추적할 수 있는 좋은 도구도 필요할 것이다. 유용한 기법을 하나 소개하겠다.</p>
<p>특정한 비즈니스 작업 처리를 시작할 때 고유한 &quot;추적 아이디&quot;를 만들어서 붙이는 것이다. 그리고 해당 작업에 관여하는 모든 액터로 아이디를 전파하면, 나중에 로그 파일을 뒤져서 어떤 일이 일어났는지 재구성해 볼 수 있을 것이다.<br>
<!-- -->마지막으로 이런 종류의 시스템은 맞춰야 하는 구성 요소 수가 더 많기 때문에 배포하고 관리하기 더 까다롭다. 하지만 그 결과 시스템이 더 잘게 쪼개지고, 전체 시스템이 아니라 개별 액터만 교체하여 시스템을 업데이트할 수 있다는 면에서 어느 정도 보상 받는다.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/saseungmin/summary_of_technical_books/tree/main/docs/etc/pragmatic-programmer/chapter-6.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>페이지 편집</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="문서 페이지"><a class="pagination-nav__link pagination-nav__link--prev" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-5"><div class="pagination-nav__sublabel">이전</div><div class="pagination-nav__label">🤔 Chapter 5: 구부러지거나 부러지거나</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/summary_of_technical_books/docs/etc/pragmatic-programmer/chapter-7"><div class="pagination-nav__sublabel">다음</div><div class="pagination-nav__label">🤔 Chapter 7: 코딩하는 동안</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-모든-일에-동시성이-있다" class="table-of-contents__link toc-highlight">🥕 모든 일에 동시성이 있다</a></li><li><a href="#-topic-33-시간적-결합-깨트리기" class="table-of-contents__link toc-highlight">🍭 Topic 33. 시간적 결합 깨트리기</a><ul><li><a href="#-동시성-찾기" class="table-of-contents__link toc-highlight">🥕 동시성 찾기</a></li><li><a href="#-동시-작업의-기회" class="table-of-contents__link toc-highlight">🥕 동시 작업의 기회</a></li><li><a href="#-병렬-작업의-기회" class="table-of-contents__link toc-highlight">🥕 병렬 작업의 기회</a></li><li><a href="#-기회를-찾아-내는-것은-쉽다" class="table-of-contents__link toc-highlight">🥕 기회를 찾아 내는 것은 쉽다</a></li></ul></li><li><a href="#-topic-34-공유-상태는-틀린-상태" class="table-of-contents__link toc-highlight">🍭 Topic 34. 공유 상태는 틀린 상태</a><ul><li><a href="#-비-원자적-갱신" class="table-of-contents__link toc-highlight">🥕 비-원자적 갱신</a></li><li><a href="#-트랜잭션이-없는-갱신" class="table-of-contents__link toc-highlight">🥕 트랜잭션이 없는 갱신</a></li><li><a href="#-그-밖의-독점적인-접근" class="table-of-contents__link toc-highlight">🥕 그 밖의 독점적인 접근</a></li><li><a href="#-의사-선생님-아파요" class="table-of-contents__link toc-highlight">🥕 의사 선생님, 아파요.....</a></li></ul></li><li><a href="#-topic-35-액터와-프로세스" class="table-of-contents__link toc-highlight">🍭 Topic 35 액터와 프로세스</a><ul><li><a href="#-액터는-언제나-동시성을-띤다" class="table-of-contents__link toc-highlight">🥕 액터는 언제나 동시성을 띤다</a></li><li><a href="#-간단한-액터" class="table-of-contents__link toc-highlight">🥕 간단한 액터</a></li><li><a href="#-드러나지-않는-동시성" class="table-of-contents__link toc-highlight">🥕 드러나지 않는 동시성</a></li></ul></li><li><a href="#-topic-36-칠판" class="table-of-contents__link toc-highlight">🍭 Topic 36. 칠판</a><ul><li><a href="#-칠판-사용-사례" class="table-of-contents__link toc-highlight">🥕 칠판 사용 사례</a></li><li><a href="#-메시지-시스템과-칠판의-유사성" class="table-of-contents__link toc-highlight">🥕 메시지 시스템과 칠판의 유사성</a></li><li><a href="#-하지만-그렇게-간단하지-않다" class="table-of-contents__link toc-highlight">🥕 하지만 그렇게 간단하지 않다...</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/javascript/table-of-contents">자바스크립트</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/typescript/table-of-contents">타입스크립트</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/agile/table-of-contents">애자일</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/object-oriented/table-of-contents">객체지향</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/functional/table-of-contents">함수형</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/test/table-of-contents">테스트</a></li><li class="footer__item"><a class="footer__link-item" href="/summary_of_technical_books/docs/etc/table-of-contents">기타</a></li></ul></div><div class="col footer__col"><div class="footer__title">Link</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/saseungmin" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://haranglog.tistory.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="mailto:dbd02169@naver.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">E-mail<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/saseungmin95" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/saseungmin/summary_of_technical_books/tree/main/summarize_books_in_markdown" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github Markdown에서 보기(archived)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/saseungmin/summary_of_technical_books" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Summary of Books, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>