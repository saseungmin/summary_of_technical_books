---
sidebar_position: 10
---

# βοΈ Chapter 9: λΉ„μ©-ν¨μ¨μ μΈ ν…μ¤νΈ λ””μμΈν•κΈ°

-  μμ •ν•κΈ° μ‰¬μ΄ μ½”λ“λ¥Ό μ‘μ„±ν•λ” μΌμ€?
    - κ°μ²΄μ§€ν–¥ λ””μμΈμ„ μ΄ν•΄ν•κ³  μμ–΄μ•Ό ν•λ‹¤.
    - μ½”λ“λ¥Ό λ¦¬ν©ν„°λ§ν•λ” λ²•μ„ μµν€μ•Ό ν•λ‹¤. (**μ½”λ“μ μ™Έμ μΈ μ‘λ™λ°©μ‹μ„ λ³€κ²½ν•μ§€ μ•μΌλ©΄μ„**) 
    - μμ • κ°€λ¥ν• μ½”λ“λ¥Ό μ‘μ„±ν•λ ¤λ©΄ λ†’μ€ μμ¤€μ ν…μ¤νΈλ¥Ό μ§¤ μ μμ–΄μ•Ό ν•λ‹¤.

## π“ μλ„λ¥Ό κ°€μ§€κ³  ν…μ¤νΈν•κΈ°
- ν…μ¤νΈλ” λ²„κ·Έλ¥Ό μ¤„μ—¬μ£Όκ³  λ¬Έμ„μ μ—­ν• μ„ ν•λ©° ν…μ¤νΈλ¥Ό λ¨Όμ € μ‘μ„±ν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ…μ λ””μμΈμ΄ ν–¥μƒλλ‹¤.
- μ§„μ •ν• ν…μ¤νΈμ λ©ν‘λ” λ””μμΈμ μ§„μ •ν• λ©ν‘μ™€ λ‘κ°™μ΄, μ½”λ“ μ‘μ„± λΉ„μ©μ„ μ¤„μ΄λ” κ²ƒμ΄λ‹¤.
- ν…μ¤νΈ μ½”λ“λ¥Ό λ””μμΈν•λ” λ° λ“λ” μ‹κ°„λ³΄λ‹¤ μ¤λ κ±Έλ¦°λ‹¤λ©΄ ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ” μλ―Έκ°€ μ—†μ§€λ§, ν…μ¤νΈ μ‘μ„± λΉ„μ©μ΄ λ„λ¬΄ λ†’μ€ λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν• λ°©λ²•μ€ ν…μ¤νΈλ¥Ό κ·Έλ§λ‘λ” κ²ƒμ΄ μ•„λ‹λΌ ν…μ¤νΈλ¥Ό λ” μ μ§¤ μ μλ„λ΅ μλ ¨ν•λ” κ²ƒμ΄λ‹¤.

### π ν…μ¤νΈ μλ„λ¥Ό μ•κΈ°

#### π¤ λ²„κ·Έ μ°Ύμ•„λ‚΄κΈ°
- μ΄κΈ° λ‹¨κ³„μ—μ„ λ²„κ·Έλ¥Ό λ°κ²¬ν•κΈ°λ„ μ‰½κ³  μμ •ν•κΈ°λ„ μ‰¬μΈ λΏ μ•„λ‹λΌ μ½”λ“λ¥Ό μΌμ° μ¬λ°”λ¥΄κ² λ§λ“¤μ–΄ λ†“λ” κ²ƒμ΄ μ½”λ“ λ””μμΈμ— κΈμ •μ μΈ μν–¥μ„ λ―ΈμΉλ‹¤.

#### π¤ λ¬Έμ„λ¥Ό μ κ³µν•κΈ°
- ν…μ¤νΈλ§μ΄ λ””μμΈμ— λ€ν• λ―Ώμ„ μ μλ” λ¬Έμ„λ¥Ό μ κ³µν•λ‹¤.

#### π¤ λ””μμΈ κ²°μ •μ„ λ―Έλ£¨κΈ°
- ν…μ¤νΈλ” λ””μμΈ κ²°μ •μ„ μ•μ „ν•κ² λ―Έλ£° μ μλ„λ΅ ν•΄μ¤€λ‹¤.
- **μ–΄λ–¤ κ²ƒ**μ΄ ν•„μ”ν•λ° μ•„μ§ κ·Έ λ¬΄μ—‡μ„ μ•μ•„λ‚΄κΈ°μ—λ” μ¶©λ¶„ν• μ •λ³΄κ°€ μ—†λ” κ²½μ°κ°€ μλ‹¤.
- ν…μ¤νΈκ°€ μΈν„°νμ΄μ¤μ— κΈ°λ€κ³  μλ‹¤λ©΄ μΈν„°νμ΄μ¤ λ°‘μ— μ¨κ²¨μ§„ κµ¬μ²΄μ μΈ μ½”λ“λ” λ‚μ¤‘μ— λ¦¬ν©ν„°λ§ν•  μ μλ‹¤.
- ν…μ¤νΈλ” μΈν„°νμ΄μ¤κ°€ κ³„μ†ν•΄μ„ μ¬λ°”λ¥΄κ² μ‘λ™ν•κ³  μλ‹¤λ” μ μ„ ν™•μΈν•΄ μ¤„ μ μκ³  λ¦¬ν©ν„°λ§ κ³Όμ •μ—μ„ ν…μ¤νΈλ¥Ό λ‹¤μ‹ μ‘μ„±ν•  ν•„μ”λ„ μ—†λ‹¤.
- μλ„μ μΌλ΅ μΈν„°νμ΄μ¤μ— μμ΅΄ν•λ” ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ©΄ μ•„λ¬΄λ° λ€κ°€λ¥Ό μΉλ¥΄μ§€ μ•κ³ λ„ μ•μ „ν•κ² λ””μμΈ κ²°μ •μ„ λ―Έλ£° μ μλ‹¤.

#### π¤ μ¶”μƒν™”λ¥Ό λ•κΈ°
- μΆ‹μ€ λ””μμΈμ€ μ¶”μƒν™”λ μ½”λ“μ— κΈ°λ€κ³  μλ” μ‘κ³  λ…λ¦½μ μΈ κ°μ²΄λ“¤μ„ μμ—°μ¤λ½κ² λ§λ“¤μ–΄λ‚Έλ‹¤. μ΄λ° μ¶”μƒν™”λ“¤ μ‚¬μ΄μ μƒνΈμ‘μ©μΌλ΅ μ΅°κΈμ”© λ³€ν•΄κ°„λ‹¤.
- μ¶”μƒν™”λ λ””μμΈμ΄ μ–΄λ μκ°„μ— λ„λ‹¬ν•λ©΄, ν…μ¤νΈ μ—†μ΄λ” λ” μ΄μƒ μ•μ „ν•κ² μ½”λ“λ¥Ό μμ •ν•  μ μ—†λ” μμ¤€μ— λ„λ‹¬ν•λ‹¤.
- ν…μ¤νΈλ” λ¨λ“  μ¶”μƒν™”λ μΈν„°νμ΄μ¤μ κΈ°λ΅μ΄κΈ° λ•λ¬Έμ— μ°λ¦¬μ μ‘μ—…μ„ μ§€μ§€ν•΄μ£Όλ” κΈ°λ°μ΄ λλ‹¤.

#### π¤ λ””μμΈμ κ²°μ  λ“λ¬λ‚΄κΈ°
- ν…μ¤νΈλ¥Ό μ‘μ„±ν•κΈ° μ„ν• μ¤€λΉ„ μ‘μ—…μ΄ λ„λ¬΄ νκ²Ήλ‹¤λ©΄ μ½”λ“μ— λ„λ¬΄ λ§μ€ λ§¥λ½(context)μ΄ μλ‹¤λ” λ»μ΄λ‹¤.
- κ°μ²΄ ν•λ‚λ¥Ό ν…μ¤νΈν•κΈ° μ„ν•΄ λ‹¤λ¥Έ κ°μ²΄λ¥Ό λ§μ΄ λμ–΄μ™€μ•Ό ν•λ‹¤λ©΄ μ΄ μ½”λ“λ” μμ΅΄μ„±μ΄ λ†’λ‹¤λ” λ»μ΄λ‹¤. λ””μμΈμ΄ λ‚μ  λ• ν…μ¤νΈλ” νλ“¤μ–΄μ§„λ‹¤.
- ν•μ§€λ§, ν…μ¤νΈκ°€ νλ“¤λ‹¤κ³  ν•΄μ„ μ• ν”λ¦¬μΌ€μ΄μ…μ λ””μμΈμ— λ¬Έμ κ°€ μλ‹¤λ” λ»μ€ μ•„λ‹λ‹¤.
- μµμ†ν•μ λΉ„μ©μΌλ΅ ν…μ¤νΈκ°€ μ κ³µν•λ” μ΄μ μ„ μµλ€ν•μΌλ΅ λ„λ¦¬λ” κ²ƒμ΄κ³  μ΄κ±Έ μ΄λ£¨κΈ° μ„ν•΄μ„λ” λμ¨ν•κ² κ²°ν•©λ ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ” κ²ƒμ΄λ‹¤.

### π λ¬΄μ—‡μ„ ν…μ¤νΈν• μ§€ μ•κΈ°
- ν…μ¤νΈμ—μ„ λ” λ‚μ€ κ°€μΉλ¥Ό μ–»κΈ° μ„ν• λ°©λ²• μ¤‘ ν•λ‚λ” ν…μ¤νΈλ¥Ό λ μ§λ” κ²ƒμ΄λ‹¤. μ΄λ¥Ό μ„ν•΄μ„λ” λ¨λ“  κ²ƒμ„ λ‹¨ ν•λ²λ§ ν…μ¤νΈν•κ³  μ λ€λ΅ λ κ³³μ—μ„ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤.
- ν…μ¤νΈμ—μ„ μ¤‘λ³µμ„ μ κ±°ν•λ©΄ μ• ν”λ¦¬μΌ€μ΄μ…μ΄ μμ •μ— λ§μ¶° ν…μ¤νΈλ¥Ό μμ •ν•΄μ•Ό ν•λ” λΉ„μ©μ„ μ¤„μΌ μ μλ‹¤.
- ν…μ¤νΈμ ν•µμ‹¬λ‚΄μ©λ§ λ‚¨κ²¨ λ†“κΈ° μ„ν•΄μ„λ” ν…μ¤νΈμ μλ„λ¥Ό λ§¤μ° λλ ·ν•κ² κ°€μ§€κ³  μμ–΄μ•Ό ν•κ³  μ΄ μλ„λ” μ°λ¦¬κ°€ μ΄λ―Έ μ•κ³  μλ” λ””μμΈ μ›μΉ™μΌλ΅λ¶€ν„° λ„μ§‘μ–΄ λ‚Ό μ μλ‹¤.
- λ””μμΈμ ν•µμ‹¬μ€ λ‹¤λ¥Έ κ°μ²΄μ λ‚΄λ¶€μ— λ€ν• μλ„μ μΈ λ¬΄μ§€μ— μκ³  κ°μ²΄λ¥Ό κ·Έμ € λ©”μ‹μ§€μ— λ°μ‘ν•λ” μ΅΄μ¬μ²λΌ μ·¨κΈ‰ν•  λ• μ• ν”λ¦¬μΌ€μ΄μ…μ μμ •μ΄ μ‰¬μ›μ§„λ‹¤. κ·Έλμ•Ό μµμ†ν•μ λΉ„μ©μΌλ΅ μµλ€ν•μ μ΄λ“μ„ μ κ³µν•λ” ν…μ¤νΈλ¥Ό μ‘μ„±ν•  μ μλ‹¤.
- **λ¨λ“  κ°μ²΄μ—μ„ κ°€μ¥ μ•μ •μ μΈ κ²ƒμ€ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ΅ μ°λ¦¬κ°€ ν…μ¤νΈν•λ” κ²ƒμ€ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤μ—μ„ μ •μλ λ©”μ‹μ§€μ΄λ‹¤.**
- **κ°€μ¥ λΉ„ν¨μ¨μ μΈ κ²ƒμ€ λ¶ν•„μ”ν• ν…μ¤νΈλ” κ°μ²΄λ¥Ό κ°μ‹Έλ” λ°©μ–΄λ§‰μ„ λ«κ³  λ“¤μ–΄κ°€μ„ κ°μ²΄ λ‚΄λ¶€μ λ¶μ•μ •ν• μ„Έλ¶€μ‚¬ν•­μ„ ν…μ¤νΈν•λ” κ²ƒμ΄λ‹¤.** λ¦¬ν©ν† λ§μ‹ μ μ§€λ³΄μ λΉ„μ©λ§ λ†’μ΄κ² λλ‹¤.
- κ·Έλ ‡κΈ° λ•λ¬Έμ— ν…μ¤νΈλ” κ°μ²΄μ κ²½κ³„λ¥Ό λ„λ‚λ“λ” λ©”μ‹μ§€μ— μ§‘μ¤‘ν•΄μ•Ό ν•λ‹¤.
- κ°μ²΄λ” μ¤μ§ μμ‹ μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤μ— μ†ν•λ” λ©”μ‹μ§€μ μƒνƒλ§ κ²€μ¦ν•΄μ•Ό ν•λ‹¤.
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€μ— λ€ν•΄μ„λ” λ©”μ‹μ§€κ°€ λ°ν™ν•λ” μƒνƒλ¥Ό ν…μ¤νΈν•λ‹¤. λ°–μΌλ΅ λ‚κ°€λ” μ»¤λ§¨λ“ λ©”μ‹μ§€(λ‹¤λ¥Έ κ°μ²΄μ— μν–¥μ„ λ―ΈμΉλ” λ©”μ‹μ§€)μ— λ€ν•΄μ„λ” μ΄ λ©”μ‹μ§€κ°€ μ λ€λ΅ μ „μ†΅λμ—λ”μ§€ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤. λ°–μΌλ΅ λ‚κ°€λ” μΏΌλ¦¬ λ©”μ‹μ§€λ” ν…μ¤νΈν•  ν•„μ”κ°€ μ—†λ‹¤.
- λ°–μΌλ΅ μ»¤λ©λ“ λ©”μ‹μ§€κ°€ μ λ€λ΅ μ „μ†΅λμ—λ”μ§€λ§ ν…μ¤νΈν•λ‹¤λ©΄ μ‹¤μ  μ½”λ“μ™€ λμ¨ν•κ² κ²°ν•©λμ–΄ μκΈ° λ•λ¬Έμ— μ‹¤μ  μ½”λ“κ°€ λ³€κ²½λμ–΄λ„ ν…μ¤νΈλ¥Ό μμ •ν•  ν•„μ”κ°€ μ—†λ‹¤.

### π μ–Έμ  ν…μ¤νΈν• μ§€ μ•κΈ°
- ν…μ¤νΈλ¥Ό λ¨Όμ € μ‘μ„±ν•λ” κ²ƒμ΄ μΆ‹λ‹¤. ν…μ¤νΈλ¥Ό λ¨Όμ € μ‘μ„±ν•λ©΄ κ°μ²΄λ¥Ό μ²μ λ§λ“λ” μκ°„λ¶€ν„° κ°μ²΄ μ†μ— μ•½κ°„μ μ¬μ‚¬μ© κ°€λ¥μ„±μ„ κ°μΈμ‹μΌ λ†“κ² λλ‹¤.
- μ λ€λ΅ λ μ‹μ μ— μ λ‹Ήν• μ–‘μ ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ‹¤λ©΄, κ·Έλ¦¬κ³  ν…μ¤νΈλ¥Ό λ¨Όμ € μ‘μ„±ν•λ‹¤λ©΄ μ „μ²΄μ μΈ κ°λ°λΉ„μ©μ„ μ¤„μΌ μ μλ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— κ°μ²΄μ§€ν–¥ λ””μμΈμ μ›μΉ™μ„ ν…μ¤νΈμ—μ„λ„ μ μ©ν•΄μ•Ό ν•λ‹¤.

### π μ–΄λ–»κ² ν…μ¤νΈν• μ§€ μ•κΈ°
- κ°€μ¥ λ€μ¤‘μ μΈ ν…μ¤νΈ ν”„λ μ„μ›ν¬ μ‚¬μ©ν•κΈ°. μ‚¬μ©μμΈµμ΄ λ‘ν…κΈ° λ•λ¬Έμ— ν•μ„νΈν™μ„±μ„ ν¬κΈ°ν•  μ μ—†κ³ , λ•λ¶„μ— κΈ°μ΅΄ ν…μ¤νΈλ¥Ό λ¨λ‘ μ¬μ‘μ„±ν•΄μ•Όν•λ” λ³€κ²½μ‚¬ν•­μ΄ μ μ©λ  μ—¬μ§€κ°€ μ λ‹¤.
- μ–΄λ–¤ ν”„λ μ„μ›ν¬λ¥Ό μ„ νƒν• μ§€ λΏλ§ μ•„λ‹λΌ, μ„λ΅ λ‹¤λ¥Έ λ‘ κ°€μ§€ μ¤νƒ€μΌμΈ, ν…μ¤νΈ μ£Όλ„ κ°λ°(TDD)μ™€ ν–‰λ™ μ£Όλ„ κ°λ°(BDD) μ‚¬μ΄μ—μ„λ„ κ³ λ―Όν•κ³  κ²°μ •ν•΄μ•Ό ν•λ‹¤. κ°μμ κ²½ν—κ³Ό κ°μμ λ³΄λ‹¤ μ¤‘μ”ν•κ² μƒκ°ν•λ” κ°€μΉμ— μ¤€ν•΄ κ²°μ •ν•λ‹¤.
- λ‘ μ¤νƒ€μΌ λ¨λ‘ ν…μ¤νΈλ¥Ό λ¨Όμ € μ‘μ„±ν•μ§€λ§ BDDλ” λ°–μ—μ„ μ•μΌλ΅, TDDλ” μ•μ—μ„ λ°–μΌλ΅ λ‚κ°€λ” μ ‘κ·Όμ„ μ·¨ν•λ‹¤. λ³΄ν†µ λ„λ©”μΈ κ°μ²΄μ— λ€ν• ν…μ¤νΈλ΅ μ‹μ‘ν•΄μ„, μ΄λ ‡κ² λ§λ“  λ„λ©”μΈ κ°μ²΄λ¥Ό μ¬μ‚¬μ©ν•λ©΄μ„ λ°”λ΅ λ°”κΉ¥ μΈµμ„μΈ ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ‹¤.
- ν…μ¤νΈλ¥Ό ν•  λ• ν…μ¤νΈ μ¤‘μΈ κ°μ²΄λ¥Ό μ•μ•„μ•Ό ν•μ§€λ§ κ·Έ μ΄μ™Έμ κ°μ²΄μ— λ€ν•΄μ„λ” μµλ€ν• λ¬΄μ§€ν•΄μ•Ό ν•λ‹¤.
- ν…μ¤νΈ μ¤‘μΈ κ°μ²΄μ—λ§ μ΄μ μ„ λ§μ¶”κ³  ν…μ¤νΈλ¥Ό μ§„ν–‰ν•λ ¤λ©΄, ν…μ¤νΈν•λ” κ΄€μ μ„ μ„ νƒν•΄μ•Ό ν•λ‹¤. **ν…μ¤νΈλ” ν…μ¤νΈ μ¤‘μΈ κ°μ²΄μ κ°€μ¥μλ¦¬λ¥Ό λ”°λΌ μ‹μ„ μ„ κ³ μ •ν•κ³  κ·Έ κ²½κ³„λ¥Ό λ„λ‚λ“λ” λ©”μ‹μ§€λ§ μ•κ³  μλ” νΈμ΄ λ‚«λ‹¤.**

## π“ λ“¤μ–΄μ¤λ” λ©”μ‹μ§€ ν…μ¤νΈν•κΈ°
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€λ“¤μ€ κ°μ²΄μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤, λ‹¤μ‹ λ§ν•΄ κ°μ²΄κ°€ μ™Έλ¶€ μ„Έκ³„μ— λ³΄μ—¬μ§€λ” λ¨μµμ„ ν•μ„±ν•λ‹¤.
- μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤λ¥Έ κ°μ²΄λ“¤μ€ μ΄ λ©”μ‹μ§€μ μ‹κ·Έλ‹μ²μ™€ κ·Έ λ°ν™ κ²°κ³Όμ— μμ΅΄ν•κ³  μκΈ° λ•λ¬Έμ— μ΄ λ©”μ‹μ§€λ“¤μ€ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤.
- λ‹¤μμ€ 3μ¥μ μ½”λ“μ΄λ‹¤.

```ruby
class Gear
  attr_reader :chainring :cog, :rim, :tire
  def initialize(args)
    @chainring = args[:chainring]
    @cog = args[:cog]
    @rim = args[:rim]
    @tire = args[:tire]
  end

  def ratio
    chainring / cog.to_f
  end

  def gear_inches
    ratio * Wheel.new(rim, tire).diameter
  end
  # ...
end

class Wheel
  attr_reader :rim, :trie
  def initialize(rim, tire)
    @rim = rim
    @tire = tire
  end

  def diameter
    rim + (tire * 2)
  end
  # ...
end
```
- `Wheel`μ€ λ“¤μ–΄μ¤λ” λ©”μ‹μ§€ `diameter`μ— λ°μ‘ν•λ‹¤. (μ΄ λ©”μ‹μ§€λ” `Gear`κ°€ μ „μ†΅ν• λ©”μ‹μ§€ λλ” `Gear`μ—μ„ λ°–μΌλ΅ λ‚μ¨ λ©”μ‹μ§€μ΄λ‹¤.) κ·Έλ¦¬κ³  `Gear`λ” λ‘ κ°μ λ“¤μ–΄μ¤λ” λ©”μ‹μ§€, `gear_inches`μ™€ `ratio`μ— λ°μ‘ν•λ‹¤.


### π μ‚¬μ©ν•μ§€ μ•λ” μΈν„°νμ΄μ¤ μ κ±°ν•κΈ°
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€κ°€ λ”Έλ¦° κ°μ²΄λ¥Ό κ°€μ§€κ³  μμ§€ μ•λ‹¤λ©΄ μ΄ λ©”μ‹μ§€λ” ν…μ¤νΈν•  ν•„μ”κ°€ μ—†λ‹¤.

|κ°μ²΄|λ“¤μ–΄μ¤λ” λ©”μ‹μ§€λ“¤|λ°–μΌλ΅ λ‚κ°€λ” λ©”μ‹μ§€λ“¤|λ©”μ‹μ§€μ— μμ΅΄ν•λ” κ°μ²΄κ°€ μλ”κ°€?|
|:---:|:---:|:---:|:---:|
|`Wheel`|`diameter`||Yes|
|`Gear`||`diameter`|No|
||`gear_inches`|||
||`ratio`|||

### π νΌλΈ”λ¦­ μΈν„°νμ΄μ¤ κ²€μ¦ν•κΈ°
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€λ“¤μ€ λ©”μ‹μ§€κ°€ λ°ν™ν•λ” κ°’μ΄λ‚ μƒνƒλ¥Ό κ²€μ¦ν•λ” λ°©μ‹μΌλ΅ ν…μ¤νΈν•λ‹¤.
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€λ¥Ό ν…μ¤νΈν•λ” μ²« λ²μ§Έ λ‹¨κ³„λ” μ—¬λ¬ μƒν™©μ—μ„ μ–Έμ λ‚ μ¬λ°”λ¥Έ κ°’μ„ λ°ν™ν•λ”μ§€ ν™•μΈν•λ” κ²ƒμ΄λ‹¤. 

```ruby
class WheelTest < MiniTest::Unit::TestCase
  def test_calculates_diameter
    wheel = Wheel.new(26, 1.5)

    assert_in_delta(29, wheel.diameter, 0.01) # 29κ°€ λ§λ”μ§€ κ²€μ¦ν•λ” ν…μ¤νΈ
  end
end
```
- μ„ ν…μ¤νΈλ¥Ό μ„ν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤λ¥Έ κ°μ²΄λ¥Ό μƒμ„±ν•΄μ•Ό ν•λ” λ²κ±°λ΅μ›€λ„ μ—†κ³ , λ…λ¦½μ μΌλ΅ ν…μ¤νΈν•  μ μλ‹¤.
- λ‹¤μ μ½”λ“λ” `Gear`λ¥Ό ν…μ¤νΈν•λ” κ²ƒμ΄λ‹¤.

```ruby
class GearTest < MiniTest::Unit::TestCase
  def test_calculates_gear_inches
    gear = Gear.new(
      chainring: 52,
      cog: 11,
      rim: 26,
      tire: 1.5
    )

    assert_in_delta(137.1, gear.gear_inches, 0.01)
  end
end
```
- `Gear`μ `gear_inches` λ©”μ„λ“λ” λ¬΄μ΅°κ±΄ μƒλ΅μ΄ κ°μ²΄ `Wheel`μ„ λ§λ“¤κ³  μ‚¬μ©ν•λ‹¤. `Gear`μ™€ `Wheel`μ μ½”λ“μ—μ„ κ·Έλ¦¬κ³  ν…μ¤νΈμ—μ„λ„ μ„λ΅ κ²°ν•©λμ–΄ μλ‹¤. λ•λ¬Έμ— μμ •μ΄ λ°μƒν–μ„ λ• μ΄ ν…μ¤νΈκ°€ κ³ μ¥ λ‚  κ°€λ¥μ„±μ΄ μ–Όλ§λ‚ λ†’μ„μ§€λ¥Ό κ²°μ •ν•λ‹¤. ν•μ§€λ§ μ΄λ° λ¬Έμ λ¥Ό μ•ΌκΈ°ν•λ” κ²°ν•©μ€ `Gear` μ•μ½ κΉμ€ κ³³μ— μ¨μ–΄ μκΈ° λ•λ¬Έμ— ν…μ¤νΈλ¥Ό ν†µν•΄μ„ κ·Έ λ‚΄μ©μ„ νμ•…ν•  μ μ—†λ‹¤.
- ν…μ¤νΈκ°€ μµμ†ν•μ μ½”λ“λ§μ„ μ‹¤ν–‰ν•  λ• κ·Έλ¦¬κ³  ν…μ¤νΈκ°€ νΈμ¶ν•λ” μ™Έλ¶€ μ½”λ“κ°€ λ””μμΈκ³Ό μ§μ ‘μ μΌλ΅ μ—°κ΄€λμ–΄ μμ„ λ• ν…μ¤νΈλ” λΉ λ¥΄κ² μ‹¤ν–‰λλ‹¤.

### π ν…μ¤νΈ μ¤‘μΈ κ°μ²΄ κ³ λ¦½μ‹ν‚¤κΈ°
- `gear_inches`κ°€ `Gear` μ΄μ™Έμ κ°μ²΄μ— κΈ°λ€κ³  μλ‹¤λ” μ‚¬μ‹¤μ΄λ‹¤. μ΄ μ‚¬μ‹¤μ€ `Gear`λ¥Ό ν†΅λ¦½μ μΌλ΅ ν…μ¤νΈν•  μ μ—†λ‹¤λ” μ‚¬μ‹¤μ΄λ‹¤. `Gear`κ°€ νΉμ •ν• λ§¥λ½μ΄ λ¬¶μ—¬ μκ³ , `Gear`λ¥Ό μ¬μ‚¬μ©ν•κΈ° μ–΄λ µλ‹¤λ” κ²ƒμ„ λ§ν•΄μ¤€λ‹¤.
- μ•„λλ” `Gear`μ—μ„ `Wheel`μ„ λ§λ“λ” λ¶€λ¶„μ„ μ κ±°ν•΄μ„ μ΄λ° κ²°ν•©μ„ κΉ¨λ¨λ Έλ‹¤.

```ruby
class Gear
  attr_reader :chainring :cog, :wheel
  def initialize(args)
    @chainring = args[:chainring]
    @cog = args[:cog]
    @wheel = args[:wheel]
  end

  def ratio
    chainring / cog.to_f
  end

  def gear_inches
    ratio * wheel.diameter
  end
  # ...
end
```

- μ΄λ¬ν• κ²°κ³Όμ—μ„ `diameter` λ©”μ„λ“λ” νΉμ • μ—­ν• μ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ¥Ό μ΄λ£¨κ³  μλ‹¤.
- μ…λ ¥λ°›λ” κ°μ²΄μ ν΄λμ¤μ— μ–½λ§¤μ΄μ§€ μ•κ³  λ³΄λ‹¤ μμ λ΅­κ² μ‚¬κ³ ν•  μ μμ„ λ• λ”μ± λ‹¤μ–‘ν• λ””μμΈκ³Ό ν…μ¤νΈλ¥Ό μ‹λ„ν•΄ λ³Ό μ μλ‹¤.
- ν…μ¤νΈ λ‹¨κ³„μ—μ„λ„ `Wheel` μΈμ¤ν„΄μ¤λ¥Ό μ£Όμ…ν•λ” κ²ƒμ„ ν†µν•΄ μ‹¤μ  μ½”λ“μ λ³€κ²½μ‚¬ν•­μ„ ν…μ¤νΈμ— λ°μν•κ³  μλ‹¤.

```ruby
class GearTest < MiniTest::Unit::TestCase
  def test_calculates_gear_inches
    gear = Gear.new(
      chainring: 52,
      cog: 11,
      wheel: Wheel.new(26, 1.5)
    )

    assert_in_delta(137.1, gear.gear_inches, 0.01)
  end
end
```

- ν…μ¤νΈ μ½”λ“μ—μ„λ„ `Gear`κ°€ `Wheel`μ„ μ‚¬μ©ν•λ‹¤λ” μ μ΄ λ…ν™•ν•΄μ΅λ‹¤. κ³µκ°μ μΌλ΅ λ“λ¬λ‚κ² λμ—λ‹¤.
- λν• μ—¬κΈ°μ„ `Wheel`μ΄ `diameter`μ μ—­ν• μ„ μν–‰ν•κ³  μλ‹¤λ” κ²ƒ μ—­μ‹ λ…ν™•ν λ“λ¬λ‚μ§€ μ•μ•λ‹¤. μ—­ν• μ΄ λμ— λ³΄μ΄μ§€λ„ μ•κ³  `Gear`λ” `Wheel`κ³Ό κ²°ν•©λμ–΄ μμ§€λ§ ν…μ¤νΈλ¥Ό μ΄λ° λ°©μ‹μΌλ΅ μ‘μ„±ν•λ” κ²ƒμ€ λ…λ°±ν• μ΄μ μ„ ν•λ‚ κ°€μ§€κ³  μλ‹¤.

### π ν΄λμ¤λ¥Ό μ‚¬μ©ν•΄μ„ μμ΅΄μ„± μ£Όμ…ν•κΈ°
- λ‹¤μμ€ `Wheel` ν΄λμ¤μ `diameter` λ©”μ„λ“μ μ΄λ¦„μ„ `width`λ΅ λ³€κ²½ν–λ‹¤.

```ruby
class Wheel
  attr_reader :rim, :trie
  def initialize(rim, tire)
    @rim = rim
    @tire = tire
  end

  def width # λ³€κ²½
    rim + (tire * 2)
  end
  # ...
end
```
- `Gear` νƒμ¤νΈλ” `Wheel` μΈμ¤ν„΄μ¤λ¥Ό μ£Όμ…ν•κ³  μκ³  μ΄ `Wheel`μ€ `width`λ¥Ό κµ¬ν„ν•κ³  μλ‹¤κ³  κ°€μ •ν•λ‹¤. κ·Έλ°λ° `Gear`λ” μ—¬μ „ν `diameter` λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ‹¤κ³  κ°€μ •ν•λ©΄ ν…μ¤νΈλ” λ‹Ήμ—°ν μ‹¤ν¨ν•λ‹¤.

```ruby
Gear
  ERROR test_calculates_gear_inches
    undefined method 'diameter'
```
- μ΄λ¬ν• μ‹¤ν¨λ” μ΄ν•΄ν•κΈ° μ‰½λ‹¤. μ½”λ“κ°€ λ§¤μ° κµ¬μ²΄μ μ΄κΈ° λ•λ¬Έμ— ν…μ¤νΈ μ—­μ‹ κ°„λ‹¨ν•κ³  μ‹¤ν¨μ μ›μΈλ„ λ…ν™•ν•λ‹¤. κ·Έλ ‡κΈ° λ•λ¬Έμ— μ΄ ν…μ¤νΈλ” λ°”λ΅ μ΄ νΉμ •ν• κ²½μ°μ—λ§ μ λ€λ΅ μ‘λ™ν•λ‹¤.

### π μ—­ν• μ— λ€ν• μμ΅΄μ„± μ£Όμ…ν•κΈ°
- μ„ μ½”λ“μ—λ” κ°μ²΄κ°€ `Diameterizable`μ— λ€ν• μ§€μ‹μ΄ μμ΅΄ν•λ” κ³³μ΄ λ‘ κµ°λ° μλ‹¤.
- μ²«μ§Έ, `Gear`λ” μμ‹ μ΄ `Diameterizable`μ μΈν„°νμ΄μ¤λ¥Ό μ•κ³  μλ‹¤κ³  μƒκ°ν•λ‹¤. λ‹¤μ‹ λ§ν•΄ `Gear`λ” μ£Όμ…λ κ°μ²΄μ—κ² `diameter`λ¥Ό μ „μ†΅ν•΄λ„ λλ‹¤κ³  μƒκ°ν•λ‹¤.
- λ‘μ§Έ, μ£Όμ…ν•κΈ° μ„ν•΄ κ°μ²΄λ¥Ό μƒμ„±ν•λ” μ½”λ“λ” `Wheel`μ΄ μ΄λ° μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μλ‹¤κ³  μƒκ°ν•λ‹¤. λ‹¤μ‹ λ§ν•΄ `Wheel`μ΄ `diameter`λ¥Ό κµ¬ν„ν•κ³  μλ‹¤κ³  μƒκ°ν•λ‹¤.
- μ΄μ  `Diameterizable`κ°€ λ³€κ²½λλ©΄μ„ λ¬Έμ κ°€ λ°μƒν•λ”λ° `Wheel`μ— μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν–μ§€λ§ `Gear`λ” μ—¬μ „ν μμ „ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•κ³  μλ‹¤.
- μμ΅΄μ„± μ£Όμ…μ„ μ‚¬μ©ν•λ” κ¶κ·Ήμ μΈ μ΄μ λ” μ΄λ―Έ μλ” μ½”λ“λ¥Ό μμ •ν•μ§€ μ•κ³ λ„ κµ¬μ²΄ ν΄λμ¤λ“¤μ„ μ„λ΅ λ€μ²΄ν•΄μ„ μ‚¬μ©ν•κΈ° μ„ν•¨μ΄λ‹¤.
- μ• ν”λ¦¬μΌ€μ΄μ…μ μ½”λ“λ¥Ό ν• κ°€μ§€ λ°©μ‹μΌλ΅ μ‘μ„±ν•΄μ•Ό ν•λ‹¤λ©΄ μ‹¤μ  μ½”λ“λ¥Ό κ·Έλ€λ΅ λ°μν•λ” λ°©μ‹μΌλ΅ ν…μ¤νΈλ¥Ό μ‘μ„±ν•λ” κ²ƒμ΄ μΆ…μΆ… κ°€μ¥ ν¨μ¨μ μ΄λ‹¤. κµ¬μ²΄μ μΈ κ²ƒμ΄ λ³€ν•λ“  μ•„λ‹λ©΄ μ¶”μƒμ μΈ κ²ƒμ΄ λ³€ν•λ“ , ν…μ¤νΈλ” μ‹¤ν¨ν•λ” μ§€μ μ— μ λ€λ΅ μ‹¤ν¨ν•  κ²ƒμ΄κΈ° λ•λ¬Έμ΄λ‹¤.

#### π¤ ν…μ¤νΈ λ”λΈ” λ§λ“¤κΈ°
- λ‹¤μ μμ‹λ” `Diameterizable` μ—­ν• μ„ μν–‰ν•λ” κ°€μ§ κ°μ²΄ λλ” ν…μ¤νΈ λ”λΈ”μ„ λ§λ“λ” λ°©λ²•μ΄λ‹¤.

```ruby
# "Diameterizable" μ—­ν• μ„ μν–‰ν•  κ°€μ§ κ°μ²΄
class DiameterDouble
  def diameter
    10
  end
end

class GearTest < MiniTest::Unit::TestCase
  def test_calculates_gear_inches
    gear = Gear.new(
      chainring: 52,
      cog: 11,
      wheel: DiameterDouble.new
    )

    assert_in_delta(47.27, gear.gear_inches, 0.01)
  end
end  
```

- μ΄ ν…μ¤νΈ λ”λΈ”μ€ μ—­ν• μ„ μν–‰ν•λ” κ°μ²΄μ ν‘μ¤€μ μΈ ν•νƒλ΅μ¨, μ „μ μΌλ΅ ν…μ¤νΈλ§μ„ μ„ν• κ²ƒμ΄λ‹¤. μ΄λ° ν…μ¤νΈ λ”λΈ”μ΄ λ€μ‹ ν•κ³  μλ” μ‹¤μ  κ°μ²΄μ μ„Έμ„Έν• νΉμ§•λ“¤μ€ λ’¤λ΅ κ°μ¶λ‹¤.
- μ°λ¦¬κ°€ λ§λ“  ν…μ¤νΈ λ”λΈ”μ€ `diameter`λ¥Ό **μ¤ν…**(stubs)ν•κ³  μλ‹¤. λ‹¤μ‹ λ§ν•΄, μ΄λ―Έ μ •ν•΄μ§„ κ°’μ„ λ°ν™ν•λ” `diameter` λ©”μ‹μ§€λ¥Ό κ°€μ§€κ³  μλ‹¤.
- `DiameterDouble`μ€ λ©(mock)μ΄ **μ•„λ‹λ‹¤.**
- ν…μ¤νΈ λ”λΈ”μ„ μ£Όμ…ν•λ©΄ `Gear` ν…μ¤νΈμ™€ `Wheel` ν΄λμ¤ μ‚¬μ΄μ κ²°ν•©μ„ λμ„ μ μλ‹¤. λν•, ν…μ¤νΈλ” κ°„λ‹¨ν•κ³  λΉ λ¥΄κ³  λ…λ¦½μ μ΄λ©° μλ„λ¥Ό λ…ν™•ν•κ² λ“λ¬λ‚΄κ² λ  μ μλ‹¤.

#### π¤ κΏμ†μ—μ„ μ‚΄κΈ°
- μ•„κΉ `diameter`λ¥Ό `width`λ΅ λ³€κ²½ν–μ—λ”λ° `Gear`λ” μμ •ν•μ§€ μ•μ•λ‹¤. ν•μ§€λ§, μ„μ—μ„ λ³€κ²½ν• ν…μ¤νΈμ—μ„λ” `Wheel` λ€μ‹ μ— `DiameterDouble`μ„ μ£Όμ…ν–κ³ , ν…μ¤νΈλ” μ„±κ³µν•κ² λλ‹¤.
- μ• ν”λ¦¬μΌ€μ΄μ…μ€ μ λ€λ΅ μ‘λ™ν•μ§€ μ•μ§€λ§ ν…μ¤νΈλ” μ—¬μ „ν ν†µκ³Όν•κ³  μλ‹¤.
- κ·Έλ ‡κΈ° λ•λ¬Έμ— μΆ€ λ” λ‚μ€ μ½”λ“λ¥Ό μ‘μ„±ν•κΈ° μ„ν•΄μ„λ” λ¬Έμ μ ν•µμ‹¬μ„ μ΄ν•΄ν•κ³  μμ–΄μ•Ό ν•κ³  κ²°κµ­ λ¬Έμ μ μ›μΈλ“¤μ„ κΌΌκΌΌν μ‚΄ν΄λ΄μ•Ό ν•λ‹¤.
- μ§€κΈ λ°μƒν• λ¬Έμ λ” `Wheel`μ—λ” μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό λ°μν–μ§€λ§ `DiameterDouble`μ„ μμ •ν•μ§€ μ•μ€ κ²ƒμ΄λ‹¤.

#### π¤ μ—­ν• μ„ λ¬Έμ„ν™”ν•κΈ° μ„ν•΄ ν…μ¤νΈλ¥Ό μ‚¬μ©ν•κΈ°
- μ„μ™€ κ°™μ€ λ¬Έμ κ°€ λ°μƒν• μ΄λ‰΄λ” μ—­ν• μ΄ λμ— μ λ„μ§€ μ•κΈ° λ•λ¬Έμ΄λ‹¤.
- μ—­ν• μ„ λ”μ± μ„ λ…ν•κ² λ“λ¬λ‚Ό μ μλ” λ°©λ²• μ¤‘ ν•λ‚λ” `Wheel`μ΄ μ£Όμ–΄μ§„ μ—­ν• μ„ μν–‰ν•κ³  μλ‹¤κ³  λ…μ‹μ μΌλ΅ μ„ μ–Έν•λ” κ²ƒμ΄λ‹¤.
- μ•„λμ μ½”λ“μ—μ„  μ—­ν• μ€ λ¬Έμ„ν™”λμ–΄ μκ³ , `Wheel`μ΄ μ—­ν• μ„ μ λ€λ΅ κµ¬ν„ν•κ³  μλ”μ§€ ν™•μΈν•κ³  μλ‹¤.

```ruby
class WheelTest < MiniTest::Unit::TestCase
  def setup
    @wheel = Wheel.new(26, 1.5)
  end

  def test_implements_the_diameterizable_interface
    assert_respond_to(@wheel, :diameter)
  end
  
  def test_calculates_diameter
    wheel = Wheel.new(26, 1.5)

    assert_in_delta(29, wheel.diameter, 0.01)
  end
end
```

- `test_implements_the_diameterizable_interface` ν…μ¤νΈλ” μ—­ν• μ„ ν…μ¤νΈν•λ” λ°©λ²•μ„ λ³΄μ—¬μ£Όκ³  μμ§€λ§, λ§μ΅±μ¤λ½μ§€ λ»ν•λ‹¤. μ²«μ§Έ, λ‹¤λ¥Έ `Diameterizable`μ€ μ΄ ν…μ¤νΈλ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤. λ‘μ§Έ, `Wheel`μ΄ `Diameterizable` μ—­ν• μ„ μν–‰ν•λ”μ§€ κ²€μ¦ν•λ” κ²ƒλ§μΌλ΅λ” `Gear`μ `Diameterizable`λ¥Ό κΉλΉ΅ μκ³  μμ •ν•μ§€ μ•λ” μ‹¤μλ¥Ό ν•΄κ²°ν•΄μ£Όμ§€ λ»ν•λ‹¤.
- ν…μ¤νΈλ” μ—¬μ „ν μ‹¤ν¨ν•΄μ•Ό ν•λ” μκ°„μ—λ„ λ¬Έμ κ°€ μ—†λ‹¤κ³  λ§ν•κ³  μλ‹¤. ν•μ§€λ§, λ¬Έμ„ν™”ν™”κ³  ν…μ¤νΈν•λ” λ¬Έμ λ” κ°„λ‹¨ν ν•΄κ²°ν•  μ μλ‹¤.
- μ§„μ§ κ°μ²΄μ™€ κ°€μ§ κ°μ²΄μ—μ„ μ„ νƒν•λ” ν•λ” λ¬Έμ λ” μ§„μ§ κ°μ²΄λ” μ‹¤μ  μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ°μƒν•λ” λ¬Έμ κ°€ ν…μ¤νΈμ—μ„λ„ μ •ν™•ν ν¬μ°©λλ‹¤. λ€μ‹  ν…μ¤νΈ μ‹¤ν–‰ μ†λ„κ°€ λλ ¤μ§„λ‹¤.
- λ°λ€λ΅ ν…μ¤νΈ λ”λΈ”μ„ μ£Όμ…ν•λ©΄ ν…μ¤νΈλ¥Ό λ™ν™” μ† μ„Έμƒμ— κ°€λ‘¬λ²„λ¦΄μ§€λ„ λ¨λ¥Έλ‹¤.
- ν…μ¤νΈ μ½”λ“λ” κ°μ²΄λ“¤ μ‚¬μ΄μ κ²°ν•©μ„ κΉ¨λ¨λ ¤μ£Όμ§€ μ•κ³  μμ΅΄μ„±μ„ μ£Όμ…ν•΄μ£Όμ§€λ„ μ•λ”λ‹¤.

## π“ ν”„λΌμ΄λΉ— λ©”μ„λ“ ν…μ¤νΈν•κΈ°
- ν”„λΌμ΄λΉ— λ©”μ„λ“λ” ν…μ¤νΈ μ¤‘μΈ κ°μ²΄μ μ™Έλ¶€μ—μ„λ” μ „ν€ λ³΄μ΄μ§€ μ•κΈ° λ•λ¬Έμ— μ΄μƒμ μ΄κ³  μ™„λ²½ν• λ””μμΈμ΄ κ°–μ¶°μ Έ μλ‹¤λ©΄ ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό ν…μ¤νΈν•μ§€ μ•μ•„λ„ λλ‹¤.
- ν•μ§€λ§, ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό λ‹¤λ£° λ•μ—λ„ λ””μμ΄λ„μ νλ‹¨κ³Ό μ μ—°ν•¨μ΄ ν•„μ”ν•λ‹¤.

### π ν…μ¤νΈ κ³Όμ •μ—μ„λ„ ν”„λΌμ΄λΉ— λ©”μ„λ“ λ¬΄μ‹ν•κΈ°
- ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό ν…μ¤νΈν•μ§€ λ§μ•„μ•Ό ν•  μ΄μ λ” λ‹¤μκ³Ό κ°™λ‹¤.
  1. μ΄λ° ν…μ¤νΈλ” μ“Έλ¨μ—†λ‹¤. ν…μ¤νΈ μ¤‘μΈ κ°μ²΄ μ•μ— μ¨μ–΄μκΈ° λ•λ¬Έμ— κ·Έ μ™Έλ¶€μ—μ„λ” λ³΄μ΄μ§€ μ•λ”λ‹¤. **ν”„λΌμ΄λΉ— λ©”μ„λ“λ” μ΄λ―Έ ν…μ¤νΈλ¥Ό λ¶™μ—¬ λ†“μ€ νΌλΈ”λ¦­ λ©”μ„λ“μ— μν•΄ νΈμ¶λλ‹¤.**
  2. ν”„λΌμ΄λΉ— λ©”μ„λ“λ” λ¶μ•μ •ν•λ‹¤. λ•λ¬Έμ— ν…μ¤νΈλ” λ³€κ²½λ  ν™•λ¥ μ΄ λ†’μ€ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ— κ²°ν•©λμ–΄ μλ‹¤. μ• ν”λ¦¬μΌ€μ΄μ…μ„ μμ •ν•λ©΄ λ’¤μ΄μ–΄ ν…μ¤νΈ μ—­μ‹ μμ •ν•΄μ•Ό ν•λ‹¤.
  3. ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό ν…μ¤νΈν•λ©΄ λ‹¤λ¥Έ ν”„λ΅κ·Έλλ¨Έμ—κ² μ΄ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•΄λ„ λλ‹¤λ” μλ»λ μƒκ°μ„ μ‹¬μ–΄μ¤„ μ μλ‹¤. μ½”λ“μ μΊ΅μν™”λ¥Ό λ¬΄μ‹ν•κ³  ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό μ‚¬μ©ν•κ² λλ‹¤.

### π ν…μ¤νΈ μ¤‘μΈ ν΄λμ¤μ—μ„ ν”„λΌμ΄λΉ— λ©”μ„λ“ μ κ±°ν•κΈ°
- ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό λ„λ¬΄ λ§μ΄ κ°€μ§€κ³  μμ–΄ λ„μ €ν ν…μ¤νΈν•μ§€ μ•κ³  μ§€λ‚μΉ  μ μ—†λ” κ°μ²΄λ¥Ό κ°€μ§€κ³  μλ‹¤λ©΄, λ©”μ„λ“λ“¤μ„ μƒλ΅μ΄ κ°μ²΄λ΅ μ®κΈ°λ” κ²ƒμ„ κ³ λ ¤ν•΄λ³΄μ•„μ•Ό ν•λ‹¤. λ‹¤μ‹ λ§ν•΄ νΌλΈ”λ¦­ μΈν„°νμ΄μ¤λ¥Ό κµ¬μ„±ν•λ‹¤. ν•μ§€λ§ μƒλ΅ κµ¬μ„±ν• μΈν„°νμ΄μ¤κ°€ μ•μ •μ μΈ κ²½μ°μ—λ§ μλ―Έκ°€ μλ‹¤.

### π ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό ν…μ¤νΈν•κΈ°
- ν”„λΌμ΄λΉ— λ©”μ„λ“μ— λ€ν• ν…μ¤νΈλ” λ¬Έμ κ°€ λ°μƒν• λ°”λ΅ κ·Έ λ¶€λ¶„μ„ μ •ν™•ν•κ² μ§μ–΄μ£Όλ”λ° μμκ°€ μλ‹¤. μ •ν™•ν• μ—λ¬ λ©”μ‹μ§€λ¥Ό μ κ³µν•΄ μ¤„ μ μκΈ° λ•λ¬Έμ΄λ‹¤. μ΄λ° κµ¬μ²΄μ μΈ μ—λ¬λ“¤μ€ μ‹¤μ  μ½”λ“μ™€ ν…μ¤νΈ μ½”λ“ μ‚¬μ΄μ κ°•ν• κ²°ν•©μ„ λ»ν•λ©°, μ΄λ° κ²°ν•©μ€ μ μ§€λ³΄μ λΉ„μ©μ„ λ†’μΈλ‹¤.
- ν•μ§€λ§ μ½”λ“λ¥Ό μμ •ν•λ©΄ μ–΄λ–¤ κ²°κ³Όλ¥Ό λ‚μ¤λ”μ§€ μ΄ν•΄ν•κΈ° μ‰½κ² λ§λ“¤μ–΄ μ£Όκ³ , λ³µμ΅ν• ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό λ¦¬ν©ν„°λ§ν•λ” κ³Όμ •μ νκ²¨μ›€μ„ μ–΄λ μ •λ„ λμ–΄ μ¤„ μ μλ‹¤.
- **ν”„λΌμ΄λΉ— λ©”μ„λ“λ¥Ό ν…μ¤νΈν•  λ• κΈ°λ³Έ μ›μΉ™μ€ μ λ€ ν…μ¤νΈ ν•μ§€ λ§λΌ. λ§μ•½ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤λ©΄, κ·Έλλ„ ν…μ¤νΈ ν•μ§€ λ§λΌ. λ¬Όλ΅  κΌ­ ν•΄μ•Ό ν•λ” μƒν™©μ—μ„λ” ν…μ¤νΈν•΄λ„ λλ‹¤.**

## π“ λ°–μΌλ΅ λ‚κ°€λ” λ©”μ‹μ§€ ν…μ¤νΈν•κΈ°
- λ°–μΌλ΅ λ‚κ°€λ” λ©”μ‹μ§€λ” **μΏΌλ¦¬ λ©”μ‹μ§€**μ΄κ±°λ‚ **μ»¤λ§¨λ“ λ©”μ‹μ§€**μ΄λ‹¤.
- μΏΌλ¦¬ λ©”μ‹μ§€λ” μ „μ†΅ν•λ” μ†΅μ‹ μμ—κ²λ§ μ¤‘μ”ν• λ©”μ‹μ§€μ΄κ³  μ»¤λ§¨λ“ λ©”μ‹μ§€λ” μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤λ¥Έ κ°μ²΄λ“¤μ—κ²λ„ μν–¥μ„ λ―ΈμΉλ‹¤.

### π μΏΌλ¦¬ λ©”μ‹μ§€ λ¬΄μ‹ν•κΈ°

```ruby
class Gear
  # ...
  def gear_inches
    ratio * wheel.diameter
  end
end
```

- `gear_inches`λ¥Ό μ μ™Έν• μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤λ¥Έ λ¶€λ¶„μ€ `diameter`κ°€ μ „μ†΅λμ—λ‹¤λ” μ‚¬μ‹¤μ— κ΄€μ‹¬μ΄ μ—†λ‹¤. `diameter` λ©”μ„λ“λ” μ•„λ¬΄λ° λ¶€μ‘μ©λ„ λ‚³μ§€ μ•λ”λ‹¤.
- μκΈ° μμ‹ μ—κ² μ „μ†΅ν•λ” λ©”μ‹μ§€λ¥Ό ν…μ¤νΈν•μ§€ μ•λ” κ²ƒκ³Ό κ°™μ€ μ΄μ λ΅ λ°–μΌλ΅ λ‚κ°€λ” λ©”μ‹μ§€λ„ ν…μ¤νΈν•  ν•„μ”κ°€ μ—†λ‹¤.
- `gear_inches` λ©”μ„λ“λ” `diameter` λ©”μ‹μ§€κ°€ λ°ν™ν•λ” κ°’μ— μμ΅΄ν•κ³  μμ§€λ§, `diameter`κ°€ μ λ€λ΅ μ‘λ™ν•λ”μ§€ ν…μ¤νΈν•λ” κ²ƒμ€ `Wheel` λ‹΄λ‹Ήμ΄μ§€ `Gear`κ°€ μ‹ κ²½ μ“Έ λ‚΄μ©μ΄ μ•„λ‹λ‹¤. λ•λ¬Έμ— `Gear`κ°€ ν…μ¤νΈν‹€ μ¤‘λ³µν•΄μ„ μ‘μ„±ν•  ν•„μ”λ” μ—†λ‹¤.
- `Gear`μ μ±…μ„μ€ `gear_inches`κ°€ μ λ€λ΅ μ‘λ™ν•κ³  μλ”μ§€ κ²€μ¦ν•λ” κ²ƒμ΄λ‹¤.

### π μ»¤λ§¨λ“ λ©”μ‹μ§€ κ²€μ¦ν•κΈ°
- μ• ν”λ¦¬μΌ€μ΄μ…μ λ‹¤λ¥Έ λ¶€λ¶„μ΄ μ΄ λ©”μ‹μ§€ μ „μ†΅μ κ²°κ³Όμ— μμ΅΄ν•κ³  μμΌλ©΄ ν…μ¤νΈ μ¤‘μΈ κ°μ²΄κ°€ λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•΄μ•Ό ν•  μ±…μ„μ„ κ°€μ§€κ³  μλ‹¤.
- μλ¥Ό λ“¤μ–΄ `Gear` ν΄λμ¤λ” μ• ν”λ¦¬μΌ€μ΄μ… μ „μ²΄μ— κΈ°μ–΄κ°€ λ°”λ€λ” μκ°„ μ•λ ¤μ¤„ μ±…μ„μ΄ μλ‹¤. μ΄ μ •λ³΄λ¥Ό κ°€μ§€κ³  ν–‰λ™μ„ λ³€κ²½ν•΄μ•Ό ν•λ‹¤.

```ruby
class Gear
  attr_reader :chainring, :cog, :wheel, :observer
  def initialize(args)
    # ...
    @observer = args[:observer]
  end

  # ...

  def set_cog(new_cog)
    @cog = new_cog
    changed
  end

  def set_chainring(new_chainring)
    @chainring = new_chainring
    changed
  end

  def changed
    observer.changed(chainring, cog)
  end

  # ...
end
```

- `cogs`λ‚ `chainrings`κ°€ λ³€κ²½λλ©΄ μ΄ λ‚΄μ©μ„ `observer`μ—κ² μ•λ ¤μ¤μ•Ό ν•λ‹¤. λ•λ¬Έμ— `changed` λ©”μ‹μ§€κ°€ μ „μ†΅λμ—λ”μ§€ ν…μ¤νΈν•΄μ•Ό ν•λ‹¤. λν•, `observer`μ `changed`λ©”μ„λ“κ°€ λ¬΄μ—‡μ„ λ°ν™ν•λ”μ§€μ™€λ” μƒκ΄€μ—†μ΄ μ‘λ™ν•΄μ•Ό ν•λ‹¤.
- μ¤‘λ³µμ„ ν”Όν•λ ¤λ©΄ `Gear`μ `changed`κ°€ λ¬΄μ—‡μ„ λ°ν™ν•λ”μ§€ ν™•μΈν•μ§€ μ•μΌλ©΄μ„λ„, `Gear`κ°€ `changed`λ¥Ό `observer`μ—κ² μ „μ†΅ν–λ‹¤λ” μ‚¬μ‹¤μ„ κ²€μ¦ν•΄μ•Ό ν•λ‹¤. μ΄λ΄λ• **λ©**(**mock**)μ„ μ‚¬μ©ν•λ©΄ λλ‹¤. λ©μ€ ν–‰λ™μ— λ€ν• ν…μ¤νΈμ΄κ³ , μƒνƒμ— λ€ν• ν…μ¤νΈμ™€λ” λ°λ€λλ‹¤. λ© κ°μ²΄κ°€ κΈ°λ€ν•λ” λ°”λ¥Ό ν…μ¤νΈν•λ‹¤.
- ν…μ¤νΈλ” λ© κ°μ²΄λ¥Ό λ§λ“¤κ³  λ© κ°μ²΄λ¥Ό `observer`μ μ„μΉμ— λ†“λ”λ‹¤.

```ruby
class GearTest < MiniTest::Unit::TestCase

  def setup
    @observer = MiniTest::Mock.new
    @gear = Gear.new(
      chainring: 52,
      cog: 11,
      observer = @observer
    )
  end

  def test_notifies_observers_when_cogs_change
    # λ© κ°μ²΄κ°€ changed λ©”μ‹μ§€λ¥Ό μμ‹ ν•κ³ μ ν•λ‹¤λ” μ‚¬μ‹¤μ„ λ…μ‹ (μ–΄λ–¤ λ©”μ‹μ§€λ¥Ό κΈ°λ€ν•κ³  μλ”μ§€)
    @observer.expect(:changed, true, [52, 27])
    # κΈ°λ€λ¥Ό μ¶©μ΅±μ‹ν‚¬ μ μλ” ν–‰λ™μ„ μ λ°
    @gear.set_cog(27)
    # λ© κ°μ²΄μ—κ² μ£Όμ–΄μ§„ κΈ°λ€κ°€ μ¶©μ΅±ν•λ”μ§€ λ¬Όμ–΄λ³Έλ‹¤.
    @observer.verify
  end

  def test_notifies_observers_when_chainring_change
    @observer.expect(:changed, true, [42, 11])
    @gear.set_chainring(42)
    @observer.verify
  end

end
```

- λ© κ°μ²΄κ°€ λ©”μ‹μ§€λ¥Ό κ°€μ§€κ³  ν•λ” μΌμ€ κ·Έμ € λ©”μ‹μ§€λ¥Ό μμ‹ ν–λ‹¤λ” μ‚¬μ‹¤μ„ κΈ°μ–µν•λ” κ²ƒλΏμ΄λ‹¤. λ°ν™ κ°’μ΄ μ¤‘ν•κ² μ•„λ‹λΌ λ©”μ‹μ§€μ μ „μ†΅ μ—¬λ¶€λ¥Ό κ²€μ¦ν•΄μ•Ό ν•λ‹¤.

## π“ μ¤λ¦¬ νƒ€μ… ν…μ¤νΈν•κΈ°

### π μ—­ν•  ν…μ¤νΈν•κΈ°
- 5μ¥μ μμ μ΄λ‹¤.

```ruby
class Trip
  attr_reader :bicycles, :customers, :vehicle

  def prepare(preparers)
    preparers.each {|preparer|
      preparer.prepare_trip(self)}
  end
end

class Mechanic
  def prepare_trip(trip)
    trip.bicycles.each {|bicycle|
      prepare_bicycle(bicycle)}
  end

  # ...
end

class TripCoordinator
  def prepare_trip(trip)
    buy_food(trip.customers)
  end

  # ...
end

class Driver
  def prepare_trip(trip)
    vehicle = trip.vehicle
    gas_up(vehicle)
    fill_water_tank(vehicle)
  end

  # ...
end
```

- ν…μ¤νΈλ” `Preparer` μ—­ν• μ„ λ¬Έμ„ν™”ν•΄μ•Ό ν•κ³ , μ—­ν•  μν–‰μ κ°κ°μ΄ μ¬λ°”λ¥΄κ² ν–‰λ™ν•κ³  μλ”μ§€ κ²€μ¦ν•΄μ•Ό ν•λ‹¤. κ·Έλ¦¬κ³  `Trip`μ΄ `Preparers`λ“¤κ³Ό μ λ€λ΅ μ†ν†µν•κ³  μλ‹¤λ” κ²ƒμ„ λ³΄μ—¬μ¤μ•Ό ν•λ‹¤.
- `Preparer`μ μΈν„°νμ΄μ¤λ¥Ό ν…μ¤νΈν•κ³  λ¬Έμ„ν™”ν•΄μ£Όλ” λ¨λ“μ€ λ‹¤μκ³Ό κ°™λ‹¤.

```ruby
module PreparerInterfaceTest
  def test_implements_the_preparer_interface
    assert_respond_to(@object, :prepare_trip)
  end
end
```

- μ΄ λ¨λ“μ€ `@object`κ°€ `prepare_trip`μ— λ°μ‘ν•λ”μ§€ κ²€μ¦ν•λ‹¤. μ•„λ ν…μ¤νΈ μ½”λ“λ” μ΄ λ¨λ“μ„ μ‚¬μ©ν•΄μ„ `Mechanic`μ΄ `Preparer`μΈμ§€ ν™•μΈν•κ³  μλ‹¤.

```ruby
class MechanicTest < MiniTest::Unit::TestCase
  include PreparerInterfaceTest

  def setup
    # @objectλ¥Ό κ°€μ§€κ³  Mechanicμ„ λ§λ“ λ‹¤.
    @mechanic = @object = Mechanic.new
  end

  # @mechanicμ„ μ‚¬μ©ν•λ” λ‹¤λ¥Έ ν…μ¤νΈλ“¤
end
```

- λ‚λ¨Έμ§€ `TripCoordinator`μ™€ `Driver` ν…μ¤νΈλ„ κ°™μ€ ν¨ν„΄μ΄λ‹¤.
- `PreparerInterfaceTest`λ¥Ό λ¨λ“μ ν•νƒλ΅ μ •μν–κΈ° λ•λ¬Έμ— ν…μ¤νΈλ¥Ό ν• λ²λ§ μ‘μ„±ν•κ³ λ„ μ—­ν•  μν–‰ κ°μ²΄λ“¤μ΄ ν…μ¤νΈ μ½”λ“λ¥Ό μ¬μ‚¬μ©ν•  μ μμ—λ‹¤. λ¨λ“ λ•λ¶„μ— μ—­ν• μ„ λ…μ‹μ μΌλ΅ λ¶ μ μκ² λμ—λ‹¤.
- λ“¤μ–΄μ¤λ” λ©”μ‹μ§€λ¥Ό ν…μ¤νΈν•μ€μΌλ‹ λ°λ€λ΅ `Trip`μ΄ μ „μ†΅ν•λ” λ©”μ‹μ§€λ¥Ό ν…μ¤νΈν•λ‹¤. λ© κ°μ²΄λ¥Ό λ§λ“¤κ³  μ΄ κ°μ²΄κ°€ κΈ°λ€ν•λ” λ°”λ¥Ό μ •μν•λ©΄ λλ‹¤.

```ruby
class TripTest < MiniTest::Unit::TestCase

  def test_requests_trip_preparation
    @preparer = MiniTest::Mock.new # λ© κ°μ²΄ μƒμ„±
    @trip = Trip.new
    @preparer.expect(:prepare_trip, nil, [@trip])

    @trip.prepare([@preparer]) # λ©”μ„λ“ μ‹¤ν–‰
    @preparer.verify # λ© κ°μ²΄κ°€ μ λ€λ΅ μμ‹ ν–λ”μ§€ ν™•μΈ
  end

end
```

### π ν…μ¤νΈ λ”λΈ”μ„ ν™•μΈν•κΈ° μ„ν•΄ μ—­ν•  ν…μ¤νΈ μ‚¬μ©ν•κΈ°
- μ•„λλ” μλ»λ ν…μ¤νΈ μ½”λ“λ΅ μ΄μ „μ— μ„¤λ…ν–λ μ¤ν…μ„ μ‚¬μ©ν–μ„ λ•μ λ¬Έμ μ΄λ‹¤. (μ‹¤ν¨ν•΄μ•Ό ν•λ” μκ°„μ—λ„ ν†µκ³Ό)

```ruby
class DiameterDouble
  def diameter # μΈν„°νμ΄μ¤κ°€ 'width'λ΅ λ°”λ€μ—μ§€λ§
    10         # μ΄ ν…μ¤νΈ λ”λΈ”κ³Ό Gear λ¨λ‘
  end          # μ—¬μ „ν 'diameter'λ¥Ό μ‚¬μ©ν•κ³  μλ‹¤.
end

class GearTest < MiniTest::Unit::TestCase
  def test_calculates_gear_inches
    gear = Gear.new(
      chainring: 52,
      cog: 11,
      wheel: DiameterDouble.new
    )

    assert_in_delta(47.27, gear.gear_inches, 0.01)
  end
end  
```
- λ” μ΄μƒ μ ν¨ν•μ§€ μ•μ€ ν…μ¤νΈ λ”λΈ” λ•λ¬Έμ— ν…μ¤νΈλ” λ¬Έμ λ¥Ό κ±Έλ¬λ‚΄μ§€ λ»ν•κ³  `Gear`κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•λ‹¤λ” μλ»λ λ―Ώμμ„ μ¤€λ‹¤. ν•μ§€λ§ `GearTest`κ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•λ‹¤λ” κ²ƒμ€ μλ»λ ν…μ¤νΈ λ”λΈ”μ„ μ‚¬μ©ν–κΈ° λ•λ¬Έμ΄λ‹¤.
- `WheelTest`λ¥Ό λ‹¤μκ³Ό κ°™μ΄ λ§λ“¤μ—μ—λ‹¤.
- `Wheel`μ΄ `width` μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•κ³  μλ” `Diameterizable`μ μ—­ν• μ„ μν–‰ν•κ³  μλ‹¤λ” μ‚¬μ‹¤μ„ κ²€μ¦ν•κ³  μλ‹¤.

```ruby
class WheelTest < MiniTest::Unit::TestCase
  def setup
    @wheel = Wheel.new(26, 1.5)
  end

  def test_implements_the_diameterizable_interface
    assert_respond_to(@wheel, :width)
  end
  
  def test_calculates_diameter
    # ...
  end
end
```

- λ¬Έμ λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄μ„ `Wheel`μ—μ„ `test_implements_the_diameterizable_interface` ν…μ¤νΈλ¥Ό λ½‘μ•„λ‚΄μ„ μƒλ΅μ΄ λ¨λ“ μ†μ— λ„£λ”λ‹¤.

```ruby
module DiameterizableInterfaceTest
  def test_implements_the_diameterizable_interface
    assert_respond_to(@object, :width)
  end
end
```

- λ¨λ“μ„ μΈν΄λ£¨λ“ν•κ³  `Wheel`μ„ κ°€μ§€κ³  `@object`λ¥Ό μ΄κΈ°ν™”ν•λ‹¤.

```ruby
class WheelTest < MiniTest::Unit::TestCase
  include DiameterizableInterfaceTest

  def setup
    @wheel = Wheel.new(26, 1.5)
  end
  
  def test_calculates_diameter
    # ...
  end
end
```

- λ¦¬ν©ν„°λ§μ κ²°κ³Όλ΅ λ…λ¦½μ μΈ λ¨λ“μ„ μ–»μ—κ³ , μ΄ λ¨λ“μ€ `Diameterizable`μ΄ μ λ€λ΅ μ‘λ™ν•λ‹¤λ” κ²ƒμ„ κ²€μ¦ν•΄μ¤„ μ μλ‹¤.
- μ•„λ μ½”λ“λ” `GearTest`μ— μ΄ λ¨λ“μ„ μ μ©ν• κ²ƒμ΄λ‹¤.

```ruby
class DiameterDouble
  def diameter
    10
  end
end

# ν…μ¤νΈ λ”λΈ”μ΄ μ¬λ°”λ¥Έ μΈν„°νμ΄μ¤λ¥Ό λ”°λ¥΄κ³  μλ”μ§€ κ²€μ¦ν•λ‹¤.
class DiameterDoubleTest < MiniTest::Unit::TestCase
    include DiameterizableInterfaceTest

  def setup
    @object = DiameterDouble.new
  end
end

class GearTest < MiniTest::Unit::TestCase
  def test_calculates_gear_inches
    gear = Gear.new(
      chainring: 52,
      cog: 11,
      wheel: DiameterDouble.new
    )

    assert_in_delta(47.27, gear.gear_inches, 0.01)
  end
end  
```

- μ΄λ ‡κ² ν…μ¤νΈ λ”λΈ”μ΄ μ£Όμ–΄μ§„ μ—­ν• μ„ μ¬λ°”λ¥΄κ² μν–‰ν•κ³  μλ”μ§€λ„ ν…μ¤νΈν•λ‹¤. ν…μ¤νΈλ¥Ό μ‹¤ν–‰ν•λ©΄ `DiameterDoubleTest`μ— μ—λ¬κ°€ μ¶λ ¥λλ‹¤. κ·Έλ¦¬κ³  `DiameterDouble`μ— `width`λ¥Ό μ¶”κ°€ν•  μ μλ‹¤.

```ruby
class DiameterDouble
  def width
    10
  end
end
```

- μ΄μ  ν…μ¤νΈ λ”λΈ”μ„ μμ •ν•κ³  λ‹¤μ‹ ν…μ¤νΈλ¥Ό λλ ¤λ³΄λ©΄, ν…μ¤νΈλ” `GearTest`μ• μ„ μ‹¤ν¨ν•λ‹¤.
- `Gear`μ `gear_inches` λ©”μ„λ“κ°€ `diameter` λ€μ‹  `width`λ¥Ό μ „μ†΅ν•΄μ•Όν•λ‹¤λ” κ²ƒμ΄λ‹¤.

```ruby
class Gear
  def gear_inches
    ratio * wheel.width
  end

  # ...
end
```
- μ¤λ¦¬ νƒ€μ…μ„ ν…μ¤νΈν•λ ¤λ©΄ μ—­ν• μ„ ν…μ¤νΈν•λ” λ…λ¦½μ μΈ μ½”λ“λ¥Ό λ§λ“¤κ³  μ΄ μ½”λ“λ¥Ό κ³µμ ν•  μ μμ–΄μ•Όλ§ ν•λ‹¤.
- μ΄λ ‡κ² μ—­ν•  κΈ°λ°μ κ΄€μ μ„ μ·¨ν•κ³  λ‚ λ’¤, ν…μ¤νΈ μ¤‘μΈ κ°μ²΄μ κ΄€μ μ—μ„ λ³΄λ©΄ λ‹¤λ¥Έ λ¨λ“  κ°μ²΄λ” ν•λ‚μ μ—­ν• μ΄λ‹¤. κ·Έλ¦¬κ³  μ΄ κ°μ²΄λ“¤μ„ μ£Όμ–΄μ§„ μ—­ν• μ λ€λ³€μλ΅ μ·¨κΈ‰ν•λ©΄, μ• ν”λ¦¬μΌ€μ΄μ…κ³Ό ν…μ¤νΈ λ¨λ‘ κ²°ν•©μ„ μ¤„μ΄κ³  μ μ—°μ„±μ„ λ†’μΌ μ μλ‹¤.

## π“ μƒμ† λ°›μ€ μ½”λ“ ν…μ¤νΈν•κΈ°

### π μƒμ† λ°›λ” μΈν„°νμ΄μ¤ λ…ν™•ν•κ² ν•κΈ°
- μ•„λλ” 6μ¥μ `Bicycle` ν΄λμ¤μ΄λ‹¤.

```ruby
class Bicycle
  attr_reader :size, :chain, :tire_size

  def initialize(args={})
    @size = args[:size]
    @chain = args[:chain] || default_chain
    @tire_size = args[:tire_size] || default_tire_size
    post_initialize(args)
  end

  def spares
    {
      tire_size: tire_size,
      chain: chain,
    }.merge(local_spares)
  end

  def default_tire_size
    raise NotImplementedError, "This #{self.class} cannot respond to:"
  end

  # ν•μ„ν΄λμ¤κ°€ μ¬μ •μν•  μ μλ‹¤.
  def post_initialize(args)
    nil
  end

  def local_spares
    {}
  end

  def default_chain 
    '10-speed'
  end
end
```
- μ•„λλ” `Bicycle`μ ν•μ„ν΄λμ¤ μ¤‘ ν•λ‚μΈ `RoadBike` μ½”λ“μ΄λ‹¤.

```ruby
class RoadBike < Bicycle
  attr_reader :tape_color

  def post_initialize(args)
    @tape_color = args[:tape_color]
  end

  def local_spares
    { tape_color: tape_color }
  end

  def default_tire_size
    '23'
  end
end
```
- ν…μ¤νΈμ μ²« λ²μ§Έ λ©ν‘λ” μ΄ μƒμ† κ΄€κ³„μ— μ†ν• λ¨λ“  κ°μ²΄λ“¤μ΄ μ•½μ†μ„ μ λ€λ΅ μ΄ν–‰ν•κ³  μλ”μ§€ κ²€μ¦ν•λ” κ²ƒμ΄λ‹¤.
- λ¦¬μ¤μ½”ν”„ μ›μΉ™μ„ κ²€μ¦ν•λ” λ°©λ²•μ€ κ³µν†µμ μ•½μ†μ„ ν…μ¤νΈν•λ” κ³µμ©μ½”λ“λ¥Ό μ‘μ„±ν•κ³  μ΄ ν…μ¤νΈλ¥Ό λ¨λ“  κ°μ²΄μ— μΈν΄λ£¨λ“ν•λ” κ²ƒμ΄λ‹¤.

```ruby
module BicycleInterfaceTest
  def test_responds_to_default_tire_size
    assert_respond_to(@object, :default_tire_size)
  end

  def test_responds_to_default_chain
    assert_respond_to(@object, :default_chain)
  end

  def test_responds_to_chain
    assert_respond_to(@object, :chain)
  end

  def test_responds_to_size
    assert_respond_to(@object, :size)
  end

  def test_responds_to_tire_size
    assert_respond_to(@object, :tire_size)
  end

  def test_responds_to_spares
    assert_respond_to(@object, :spares)
  end
end
```

- `BicycleInterfaceTest` ν…μ¤νΈλ¥Ό ν†µκ³Όν•λ” λ¨λ“  κ°μ²΄λ” `Bicycle`μ²λΌ ν–‰λ™ν•λ” κ°μ²΄λΌκ³  λ³Ό μ μλ‹¤.
- μ•„λ μ½”λ“λ” `BicycleTest`μ— μ΄ μΈν„°νμ΄μ¤λ¥Ό μΈν΄λ“ν• κ²ƒμ΄λ‹¤. κ·Έλ¦¬κ³  κµ¬μ²΄μ μΈ ν•μ„ν΄λμ¤ `RoadBikeTest`μ—λ„ μΈν΄λ£¨λ“ν–λ‹¤.

```ruby
class BicycleTest < MiniTest::Unit::TestCase
  include BicycleInterfaceTest

  def setup
    @bike = @object = Bicycle.new({tire_size: 0})
  end
end

class RoadBikeTest < MiniTest::Unit::TestCase
  include BicycleInterfaceTest

  def setup
    @bike = @object = RoadBike.new
  end
end
```

- `BicycleInterfaceTest`λ” λ¨λ“  μΆ…λ¥μ `Bicycle`μ΄ μ‚¬μ©ν•  μ μκ³ , μƒλ΅μ΄ ν΄λμ¤λ¥Ό λ§λ“¤λ”λΌλ„ μ‰½κ² μΈν΄λ£¨λ“ν•  μ μλ‹¤.

### π ν•μ„ν΄λμ¤μ μ±…μ„ λ…ν™•ν ν•κΈ°

#### π¤ ν•μ„ν΄λμ¤μ ν–‰λ™ ν™•μΈν•κΈ°
- μ•„λ μ½”λ“λ” ν•μ„ν΄λμ¤κ°€ κ°–μ¶”μ–΄μ•Ό ν•λ” λ°”λ¥Ό λ¬Έμ„ν™”ν• ν…μ¤νΈμ΄λ‹¤.

```ruby
module BicycleSubClassTest
  def test_responds_to_post_initialize
    assert_respond_to(@object, :post_initialize)
  end

  def test_responds_to_local_spares
    assert_respond_to(@object, :local_spares)
  end

  def test_responds_to_default_tire_size
    assert_respond_to(@object, :default_tire_size)
  end
end
```

- μ΄ ν…μ¤νΈλ” μ΄ λ©”μ‹μ§€λ“¤μ΄ μ¤μ‘λ™ν•λ” κ²ƒμ„ λ°©μ§€ν•  λΏμ΄λ‹¤. ν•μ„ν΄λμ¤κ°€ κΌ­ κµ¬ν„ν•΄μ•Ό ν•λ” λ©”μ„λ“λ” `default_tire_size`μ΄λ‹¤. ν•μ„ν΄λμ¤κ°€ μμ‹ λ§μ κ³ μ ν• λ΅μ§μ„ κµ¬ν„ν•μ§€ μ•λ”λ‹¤λ©΄ ν…μ¤νΈλ” ν†µκ³Όν•  μ μ—†λ‹¤.
- `RoadBike`λ” `Bicycle`μ ν•μ„ν΄λμ¤μ²λΌ μ‘λ™ν•΄μ•Ό ν•λ‹¤.

```ruby
class RoadBikeTest < MiniTest::Unit::TestCase
  include BicycleInterfaceTest
  include BicycleSubClassTest

  def setup
    @bike = @object = RoadBike.new
  end
end
```

- μ΄ λ‘ κ°μ μΈν„°νμ΄μ¤λ¥Ό μ‚¬μ©ν•λ©΄ ν•μ„ν΄λμ¤κ°€ κ³µμ ν•λ” λ¨λ“  ν–‰λ™μ„ μ‰½κ² ν…μ¤νΈν•  μ μλ‹¤.

#### π¤ μƒμ„ν΄λμ¤μ μ”κµ¬μ‚¬ν•­ κ²€μ¦ν•κΈ°
- ν•μ„ν΄λμ¤κ°€ `default_tire_size`λ¥Ό κµ¬ν„ν•κ³  μμ§€ μ•λ‹¤λ©΄ `Bicycle`μ΄ μ—λ¬λ¥Ό λ°μƒμ‹μΌμ•Ό ν•λ‹¤. μ΄ μ΅°κ±΄μ€ ν•μ„ν΄λμ¤κ°€ μ¶©μ΅±μ‹μΌμ•Ό ν•λ” κ²ƒμ΄μ§€λ§ μ‹¤μ  ν–‰λ™μ€ `Bicycle` μ•μ—μ„ μ‹¤ν–‰λλ‹¤. λ•λ¬Έμ— μ΄ ν…μ¤νΈλ” `BicycleTest` μ•μ— μ§μ ‘ μ¶”κ°€λμ–΄μ•Ό ν•λ‹¤.

```ruby
class BicycleTest < MiniTest::Unit::TestCase
  include BicycleInterfaceTest

  def setup
    @bike = @object = Bicycle.new({tire_size: 0})
  end

  def test_forces_subclasses_to_implement_default_tire_size
    assert_raises(NotImplementedError) {@bike.default_tire_size}
  end
end
```

### π ν•λ‚λΏμΈ ν–‰λ™ ν…μ¤νΈν•κΈ°
- μ΄μ  λ‘ κ°€μ§€μ λ¬Έμ λ§μ΄ λ‚¨μ•λ‹¤. ν•λ‚λ” κµ¬μ²΄μ μΈ ν•μ„ν΄λμ¤λ§μ νΉμν• ν–‰λ™μ„ ν…μ¤νΈν•μ§€ μ•μ•κ³ , μ¶”μƒν™”λ μƒμ„ν΄λμ¤κ°€ μ κ³µν•λ” κµ¬μ²΄μ μΈ ν–‰λ™λ„ ν…μ¤νΈν•μ§€ μ•μ•λ‹¤.

#### π¤ κµ¬μ²΄μ μΈ ν•μ„ν΄λμ¤μ ν–‰λ™ ν…μ¤νΈν•κΈ°
- `RoadBike`μ νΉμν• ν–‰λ™λ§ ν…μ¤νΈν•λ©΄ λλ‹¤.
- ν•μ„ν΄λμ¤μ νΉμν• ν–‰λ™μ„ ν…μ¤νΈν•  λ•λ” μƒμ„ν΄λμ¤μ— λ€ν• μ§€μ‹μ„ λμ–΄μ¤μ§€ μ•λ” κ²ƒμ΄ μ¤‘μ”ν•λ‹¤.
- μ•„λ `RoadBikeTest`λ” `local_spares` λ©”μ„λ“λ¥Ό ν…μ¤νΈν•κ³  μλ”λ° μ΄λ• `spares`μ— λ°μ‘ν•λ©΄ μ•λκ³  μ΅΄μ¬λ¥Ό λ¬΄μ‹ν•΄μ•Ό ν•λ‹¤. (μ΄λ―Έ `BicycleInterfaceTest`κ°€ κ²€μ¦ν–λ‹¤.)

```ruby
class RoadBikeTest < MiniTest::Unit::TestCase
  include BicycleInterfaceTest
  include BicycleSubClassTest

  def setup
    @bike = @object = RoadBike.new(tape_color: 'red')
  end

  def test_puts_tape_color_in_local_spares
    assert_equal 'red', @bike.local_spares[:tape_color]
  end
end
```

#### π¤ μ¶”μƒν™”λ μƒμ„ν΄λμ¤μ ν–‰λ™ ν…μ¤νΈν•κΈ°
- `Bicycle`μ μƒμ† κ΄€κ³„λ¥Ό μ‚΄ν΄λ³΄λ©΄ μ—¬μ „ν μ¶”μƒν™”λ μƒμ„ν΄λμ¤μ΄κΈ° λ•λ¬Έμ— λ°μƒν•λ” λ¬Έμ κ°€ μ—¬μ „ν λ‚¨μ•„ μλ‹¤. `Bicycle`μ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•κΈ°λ„ μ–΄λ µκ³  ν…μ¤νΈλ¥Ό ν•κΈ° μ„ν• μ¶©λ¶„ν• ν–‰λ™μ„ κ°€μ§€κ³  μμ§€ μ•μ„ μλ„ μλ‹¤.
- ν•΄κ²°μ±…μ€ `Bicycle`μ€ κµ¬μ²΄μ μΈ ν–‰λ™μ„ κµ¬ν„ν•κΈ° μ„ν•΄ ν…ν”λ¦Ώ λ©”μ„λ“λ¥Ό μ‚¬μ©ν•κ³  μκΈ° λ•λ¬Έμ— μƒμ„ν΄λμ¤κ°€ μ κ³µν•λ” ν–‰λ™μ„ μ¤ν…ν•λ©΄ λλ‹¤.

```ruby
# Bicycleμ μƒλ΅μ΄ ν•μ„ν΄λμ¤μΈ StubbedBikeλ¥Ό μ •μν•λ‹¤.
class StubbedBike < Bicycle
  def default_tire_size
    0
  end

  def local_spares
    {saddle: 'painful'}
  end
end

class Bicycle < MiniTest::Unit::TestCase
  include BicycleInterfaceTest

  def setup
    @bike = @object = Bicycle.new({tire_size: 0})
    # StubbedBike ν΄λμ¤μ μΈμ¤ν„΄μ¤ μƒμ„±
    @stubbed_bike = StubbedBike.new
  end

  def test_forces_subclasses_to_implement_default_tire_size
    assert_raises(NotImplementedError) {
      @bike.default_tire_size
    }
  end

  # local_sparesλ¥Ό μ λ€λ΅ μ²λ¦¬ν•λ”μ§€ κ²€μ¦
  def test_includes_local_spares_in_spares
    assert_equal @stubbed_bike.spares,{
      tire_size: 0,
      chain: '10-speed',
      saddle: 'painful'
    }
  end
end
```

- λ§μ•½ `StubbedBike`κ°€ λ” μ΄μƒ μ ν¨ν•μ§€ μ•μ•„μ„ `BicycleTest`κ°€ μ‹¤ν¨ν•΄μ•Ό ν•  λ• μ‹¤ν¨ν•μ§€ μ•μ„κΉ κ±±μ •λλ‹¤λ©΄, ν•΄κ²°μ±…μ€ μ΄λ―Έ `BicycleSubClassTest`λ¥Ό κ°€μ§€κ³  μλ‹¤λ” κ²ƒμ΄λ‹¤. `BicycleSubClassTest`λ¥Ό μ΄μ©ν•΄μ„ `StubbedBike`μ μ •μƒμƒνƒλ¥Ό ν™•μΈν•  μ μλ‹¤.

```ruby
class StubbedBike < MiniTest::Unit::TestCase
  include BicycleSubClassTest

  def setup
    @object = StubbedBike.new
  end
end
```

- μ „μ²΄μ μΈ μΈν„°νμ΄μ¤μ— λ€ν• μ½”λ“λ¥Ό ν•λ‚ μ‘μ„±ν•΄μ„ κ³µμ ν•κ³ , ν•μ„ν΄λμ¤μ μ±…μ„μ„ ν…μ¤νΈν•λ©΄ λλ‹¤.
- μ—¬λ¬κ°€μ§€ μ±…μ„μ„ λ…λ¦½μ μΌλ΅ λ¶„λ¦¬ν•λ„λ΅ λ…Έλ ¥ν•λ‹¤. λν• ν•μ„ν΄λμ¤ κ³ μ μ ν–‰λ™μ„ ν…μ¤νΈν•  λ•λ” μƒμ„ν΄λμ¤μ— λ€ν• μ§€μ‹μ΄ ν•μ„ν΄λμ¤μ ν…μ¤νΈ μ†μΌλ΅ νλ¬λ“¤μ–΄μ¤μ§€ μ•λ„λ΅ μ£Όμν•΄μ•Ό ν•λ‹¤.
- λ¦¬μ¤μ½”ν”„ μ›μΉ™μ— μ¶©μ‹¤ν• μƒλ΅μ΄ ν•μ„ν΄λμ¤λ¥Ό λ§λ“¤κ³ , μ΄ ν΄λμ¤μ ν…μ¤νΈ μ©λ„λ΅ μ‚¬μ©ν•  μ μλ‹¤.
