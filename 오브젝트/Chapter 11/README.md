# ğŸŒˆ Chapter 11: í•©ì„±ê³¼ ìœ ì—°í•œ ì„¤ê³„
- í•©ì„±ì€ ì „ì²´ë¥¼ í‘œí˜„í•˜ëŠ” ê°ì²´ê°€ ë¶€ë¶„ì„ í‘œí˜„í•˜ëŠ” ê°ì²´ë¥¼ í¬í•¨í•´ì„œ ë¶€ë¶„ ê°ì²´ì˜ ì½”ë“œë¥¼ ì¬ì‚¬ìš©í•œë‹¤. ë˜í•œ, í•©ì„±ì—ì„œ ë‘ ê°ì²´ ì‚¬ì´ì˜ ì˜ì¡´ì„±ì€ ëŸ°íƒ€ì„ì— í•´ê²°ëœë‹¤.
- ìƒì† ê´€ê³„ëŠ” **is-a ê´€ê³„**ë¼ê³  ë¶€ë¥´ê³  í•©ì„± ê´€ê³„ëŠ” **has-a ê´€ê³„**ë¼ê³  ë¶€ë¥¸ë‹¤.
- í•©ì„±ì€ êµ¬í˜„ì— ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì ì—ì„œ ìƒì†ê³¼ ë‹¤ë¥´ë‹¤. í•©ì„±ì€ ë‚´ë¶€ì— í¬í•¨ë˜ëŠ” ê°ì²´ì˜ êµ¬í˜„ì´ ì•„ë‹Œ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´í•œë‹¤. ë”°ë¼ì„œ í•©ì„±ì„ ì´ìš©í•˜ë©´ í¬í•¨ëœ ê°ì²´ì˜ ë‚´ë¶€ êµ¬í˜„ì´ ë³€ê²½ë˜ë”ë¼ë„ ì˜í–¥ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆê¸° ë–„ë¬¸ì— ë³€ê²½ì— ë” ì•ˆì •ì ì¸ ì½”ë“œë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œ ëœë‹¤.
- ì½”ë“œ ì‘ì„± ì‹œì ì— ê²°ì •í•œ ìƒì† ê´€ê³„ëŠ” ë³€ê²½ì´ ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ í•©ì„± ê´€ê³„ëŠ” ì‹¤í–‰ ì‹œì ì— ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

> ì½”ë“œ ì¬ì‚¬ìš©ì„ ìœ„í•´ì„œëŠ” ê°ì²´ í•©ì„±ì´ í´ë˜ìŠ¤ ìƒì†ë³´ë‹¤ ë” ì¢‹ì€ ë°©ë²•ì´ë‹¤.

- ìƒì†ì€ ë¶€ëª¨ í´ë˜ìŠ¤ ì•ˆì— êµ¬í˜„ëœ ì½”ë“œ ìì²´ë¥¼ ì¬ì‚¬ìš©í•˜ì§€ë§Œ í•©ì„±ì€ í¬í•¨ë˜ëŠ” ê°ì²´ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì¬ì‚¬ìš©í•œë‹¤.

## ğŸ“š ìƒì†ì„ í•©ì„±ìœ¼ë¡œ ë³€ê²½í•˜ê¸°
- 10ì¥ì—ì„œ ì½”ë“œ ì¬ì‚¬ìš©ì„ ìœ„í•´ ìƒì†ì„ ë‚¨ìš©í–ˆì„ ë•Œ ì„¸ ê°€ì§€ ë¬¸ì œì ì€ ë¶ˆí•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ ìƒì† ë¬¸ì œ, ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”© ì˜¤ì‘ìš© ë¬¸ì œ, ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ì˜ ë™ì‹œ ìˆ˜ì • ë¬¸ì œê°€ ì¡´ì¬í–ˆë‹¤.
- í•©ì„±ì„ ì‚¬ìš©í•˜ë©´ ìƒì†ì´ ì´ˆë˜í•˜ëŠ” ì„¸ ê°€ì§€ ë¬¸ì œì ì„ í•´ê²°í•  ìˆ˜ ìˆë‹¤.
- 10ì¥ì˜ ìƒì† ì˜ˆì œë¥¼ í•©ì„± ê´€ê³„ë¡œ ë³€ê²½í•´ë³¸ë‹¤.

### ğŸˆ ë¶ˆí•„ìš”í•œ ì¸í„°í˜ì´ìŠ¤ ìƒì† ë¬¸ì œ: java.util.Propertiesì™€ java.util.Stack
- `Vector`ë¥¼ ìƒì†ë°›ëŠ” `Stack`ì„ `Vector`ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¥¼ `Stack` í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ë¡œ ì„ ì–¸í•¨ìœ¼ë¡œì¨ í•©ì„± ê´€ê³„ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.

```java
public class Stack<E> {
  private Vector<E> elements = new Vector()<>;

  public E push(E item) {
    elements.addElement(item);

    return item;
  }

  public E pop() {
    if (elements.isEmpty()) {
      throw new EmptyStackException();
    }

    return elements.remove(elements.size() - 1);
  }
}
```

### ğŸˆ ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©ì˜ ì˜¤ì‘ìš© ë¬¸ì œ: InstrumentHashSet
- `InstrumentHashSet`ë„ ê°™ì€ ë°©ë²•ì„ ì‚¬ìš©í•´ì„œ í•©ì„± ê´€ê³„ë¡œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- `HashSet` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë‚´ë¶€ì— í¬í•¨í•œ í›„ `HashSet`ì˜ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì œê³µí•˜ëŠ” ì˜¤í¼ë ˆì´ì…˜ë“¤ì„ ì´ìš©í•´ í•„ìš”í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ë©´ ëœë‹¤.

```java
public class InstrumentHashSet<E> implements Set<E> {
  private int addCount = 0;
  private Set<E> set;

  public InstrumentHashSet(Set<E> set) {
    this.set = set;
  }

  @Override
  public boolean add(E e) {
    addCount++;

    return set.add(e);
  }

  @Override
  public boolean addAll(Collection<? extends E> c) {
    addCount += c.size();
    
    return set.addAll(c);
  }

  public int getAddCount() {
    return addCount;
  }

  @Override public boolean remove(Object o) { return set.remove(o); }
  @Override public void clear() { set.clear(); }
  // ...
}
```

- `InstrumentHashSet`ì€ `HashSet`ì´ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ ê·¸ëŒ€ë¡œ ì œê³µí•´ì•¼ í•œë‹¤. `HashSet`ì€ `Set` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤ì²´í™”í•˜ëŠ” êµ¬í˜„ì²´ ì¤‘ í•˜ë‚˜ì´ë©°, `InstrumentHashSet`ì´ ì œê³µí•´ì•¼ í•˜ëŠ” ëª¨ë“  ì˜¤í¼ë ˆì´ì…˜ë“¤ì€ `Set` ì¸í„°í˜ì´ìŠ¤ì— ì •ì˜ë¼ ìˆë‹¤. ë”°ë¼ì„œ `InstrumentHashSet`ì´ `Set` ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‹¤ì²´í™”í•˜ë©´ì„œ ë‚´ë¶€ì— `HashSet`ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•©ì„±í•˜ë©´ `HashSet`ì— ëŒ€í•œ êµ¬í˜„ ê²°í•©ë„ëŠ” ì œê±°í•˜ë©´ì„œë„ í¼ë¸”ë¦­ ì¸í„°í˜ì´ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ **í¬ì›Œë”©**(**forwarding**)ì´ë¼ê³  ë¶€ë¥´ê³  ë™ì¼í•œ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ì¶”ê°€ëœ ë©”ì„œë“œë¥¼ **í¬ì›Œë”© ë©”ì„œë“œ**(**forwarding method**)ë¼ê³  ë¶€ë¥¸ë‹¤.

### ğŸˆ ë¶€ëª¨ í´ë˜ìŠ¤ì™€ ìì‹ í´ë˜ìŠ¤ì˜ ë™ì‹œ ìˆ˜ì • ë¬¸ì œ: PersonalPlaylist
- ì´ê²½ìš°ì—” í•©ì„±ì„ ì´ìš©í•˜ì—¬ ë³€ê²½í•˜ë„ë¼ë„ ë‘ í´ë˜ìŠ¤ì—ì„œ ë³€ê²½ì´ ì¼ì–´ë‚œë‹¤.

```java
public class PersonalPlaylist {
  private Playlist playlist = new Playlist();

  public void append(Song song) {
    // ...
  }

  public void remove(Song song) {
    // ...
  }
}
```

- ê·¸ë ‡ë‹¤ê³  í•˜ë”ë¼ë„ ì—¬ì „íˆ ìƒì†ë³´ë‹¤ëŠ” í•©ì„±ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ë° í–¥í›„ì— `Playlist`ì˜ ë‚´ë¶€ êµ¬í˜„ì„ ë³€ê²½í•˜ë”ë¼ë„ íŒŒê¸‰íš¨ê³¼ë¥¼ ìµœëŒ€í•œ `PersonalPlaylist` ë‚´ë¶€ë¡œ ìº¡ìŠí™”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

> - ëª½í‚¤ íŒ¨ì¹˜   
> ëª½í‚¤ íŒ¨ì¹˜(Monkey Patch)ë€ í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í™˜ê²½ì—ë§Œ ì˜í–¥ì„ ë¯¸ì¹˜ë„ë¡ ì§€ì—­ì ìœ¼ë¡œ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ í™•ì¥í•˜ëŠ” ê²ƒì„ ê°€ë¦¬í‚¨ë‹¤.   
> `Playlist`ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•  ê¶Œí•œì´ ì—†ê±°ë‚˜ ì†ŒìŠ¤ì½”ë“œê°€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•˜ë”ë¼ë„ ëª½í‚¤ íŒ¨ì¹˜ê°€ ì§€ì›ë˜ëŠ” í™˜ê²½ì´ë¼ë©´ `Playlist`ì— ì§ì ‘ `remove` ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. (ë£¨ë¹„ì˜ ì—´ë¦° í´ë˜ìŠ¤, C#ì˜ í™•ì¥ ë©”ì„œë“œ)

- í•©ì„±ì€ ì•ˆì •ì„±ê³¼ ìœ ì—°ì„±ì´ë¼ëŠ” ì¥ì ì„ ì œê³µí•œë‹¤.

## ğŸ“š ìƒì†ìœ¼ë¡œ ì¸í•œ ì¡°í•©ì˜ í­ë°œì ì¸ ì¦ê°€
- ìƒì†ìœ¼ë¡œ ì¸í•´ ê²°í•©ë„ê°€ ë†’ì•„ì§€ë©´ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ë° í•„ìš”í•œ ì‘ì—…ì˜ ì–‘ì´ ê³¼ë„í•˜ê²Œ ëŠ˜ì–´ë‚˜ëŠ” ê²½í–¥ì´ ìˆë‹¤. (ì‘ì€ ê¸°ëŠ¥ë“¤ì„ ì¡°í•©í•´ì„œ ë” í° ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´ë¥¼ ë§Œë“¤ì–´ì•¼ í•˜ëŠ” ê²½ìš°)
  - í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ê¸° ìœ„í•´ ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ ìˆ˜ì˜ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•´ì•¼ í•œë‹¤.
  - ë‹¨ì¼ ìƒì†ë§Œ ì§€ì›í•˜ëŠ” ì–¸ì–´ì—ì„œëŠ” ìƒì†ìœ¼ë¡œ ì¸í•´ ì˜¤íˆë ¤ ì¤‘ë³µ ì½”ë“œì˜ ì–‘ì´ ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤.

### ğŸˆ ê¸°ë³¸ ì •ì±…ê³¼ ë¶€ê°€ ì •ì±… ì¡°í•©í•˜ê¸°
- 10ì¥ì—ì„œ ì†Œê°œí–ˆë˜ í•¸ë“œí° ê³¼ê¸ˆ ì‹œìŠ¤í…œì— ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì„ ì¶”ê°€í•´ë³¸ë‹¤.
- ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì€ ì¼ë°˜ ìš”ê¸ˆì œì™€ ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œë¼ëŠ” ë‘ ìš”ê¸ˆì œì— ë¶€ê°€ ì •ì±…ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤. (ê¸°ë³¸ ì •ì±…ê³¼ ë¶€ê°€ ì •ì±…)
- ë¶€ê°€ ì •ì±…ì€ í†µí™”ëŸ‰ê³¼ ë¬´ê´€í•˜ê²Œ ê¸°ë³¸ ì €ì±…ì— ì„ íƒì ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆëŠ” ìš”ê¸ˆ ë°©ì‹.
- ë•Œë¬¸ì— ë¶€ê°€ ì •ã…‡ì±…ì€ ê¸°ë³¸ ì •ì±…ì˜ ê³„ì‚° ê²°ê³¼ì— ì ìš©ë  ìˆ˜ ìˆê³  ì„ íƒì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆìœ¼ë©° ì¡°í•©ì´ ê°€ëŠ¥í•˜ë‹¤. ë˜í•œ, ë¶€ê°€ ì •ì±…ì€ ì„ì˜ì˜ ìˆœì„œë¡œ ì ìš© ê°€ëŠ¥í•˜ë‹¤.

> - ê¸°ë³¸ ì •ì±… : ì¼ë°˜ ìš”ê¸ˆì œ, ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œ
> - ë¶€ê°€ ì •ì±… : ì„¸ê¸ˆ ì •ì±…, ê¸°ë³¸ ìš”ê¸ˆ í• ì¸ ì •ì±…

### ğŸˆ ìƒì†ì„ ì´ìš©í•´ì„œ ê¸°ë³¸ ì •ì±… êµ¬í˜„í•˜ê¸°
- 10ì¥ì˜ ì˜ˆì œì™€ ê°™ìŒ.

### ğŸˆ ê¸°ë³¸ ì •ì±…ì— ì„¸ê¸ˆ ì •ì±… ì¡°í•©í•˜ê¸°
- ë‹¤ìŒì€ ì¼ë°˜ ìš”ê¸ˆì œì— ì„¸ê¸ˆ ì •ì±…ì„ ì¡°í•©í•˜ëŠ” ê²ƒìœ¼ë¡œ `RegularPhone` í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ì€ `TaxableRegularPhone`í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•œ ê²ƒì´ë‹¤.

```java
public class TaxableRegularPhone extends RegularPhone {
  private double taxRate;

  public TaxableRegularPhone(Money amount, Duration seconds, double taxRate) {
    super(amount, seconds);
    this.taxRate = taxRate;
  }

  @Override
  public Money calculateFee() { // ë¶€ëª¨ í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë”©
    Money fee = super.calculateFee();
    return fee.plus(fee.times(taxRate)); // ì„¸ê¸ˆ ì •ì±…ì„ ì¡°í•©í•œ ìš”ê¸ˆì„ ê³„ì‚°
  }
}
```
- `super` í˜¸ì¶œì„ ì‚¬ìš©í•œë‹¤ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì‰½ê²Œ ì–»ì„ ìˆ˜ëŠ” ìˆì§€ë§Œ ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ ì‚¬ì´ì˜ ê²°í•©ë„ê°€ ë†’ì•„ì§€ê³  ë§Œë‹¤. ê²°í•©ë„ë¥¼ ë‚®ì¶”ëŠ” ë°©ë²•ì€ ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì§€ ì•Šë„ë¡ ë¶€ëª¨ í´ë˜ìŠ¤ì— ì¶”ìƒ ë©”ì„œë“œë¥¼ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤.

```java
public abstract class Phone {
  private List<Call> calls = new ArrayList<>();

  public Money calculateFee() {
    Money result = Money.ZERO;

    for(Call call : calls) {
      result = result.plus(calculateCallFee(call));
    }

    return afterCalculated(result);
  }

  protected abstract Money calculateCallFee(Call call);
  protected abstract Money afterCalculated(Money fee);
}
```

- ìì‹ í´ë˜ìŠ¤ëŠ” `afterCalculated` ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì„œ ê³„ì‚°ëœ ìš”ê¸ˆì— ì ìš©í•  ì‘ì—…ì„ ì¶”ê°€í•œë‹¤.

```java
public class RegularPhone extends Phone {
  // ...

  @Override
  protected Money calculateCallFee(Call call) {
    return amount.times(call.getDuration().getSeconds() / seconds.getSeconds());
  }

  @Override
  protected Money afterCalculated(Money fee) {
    return fee;
  }
}
```

- `NightlyDiscountPhone` í´ë˜ìŠ¤ ì—­ì‹œ ìˆ˜ì •í•´ì•¼ í•œë‹¤.

```java
public class NightlyDiscountPhone extends Phone {
  // ...

  @Override
  protected Money calculateCallFee(Call call) {
    if(call.getFrom().getHour() >= LATE_NIGHT_HOUR) {
      return nightlyAmount.times(call.getDuration().getSeconds() / seconds.getSeconds());
    } else {
      return regularAmount.times(call.getDuration().getSeconds() / seconds.getSeconds());
    }
  }

  @Override
  protected Money afterCalculated(Money fee) {
    return fee;
  }
}
```

- ì´ì²˜ëŸ¼ ë¶€ëª¨ í´ë˜ìŠ¤ì— ì¶”ìƒ ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ë©´ ëª¨ë“  ìì‹ í´ë˜ìŠ¤ë“¤ì´ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼í•˜ëŠ” ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- ëª¨ë“  ì¶”ìƒ ë©”ì„œë“œì˜ êµ¬í˜„ì´ ë™ì¼í•˜ë‹¤. ìœ ì—°ì„±ì„ ìœ ì§€í•˜ë©´ì„œë„ ì¤‘ë³µ ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ `Phone`ì—ì„œ `afterCalculated` ë©”ì„œë“œì— ëŒ€í•œ ê¸°ë³¸ êµ¬í˜„ì„ í•¨ê»˜ ì œê³µí•˜ëŠ” ê²ƒì´ë‹¤.
- ì¶”ìƒ ë©”ì„œë“œì˜ ë‹¨ì ì€ ìƒì† ê³„ì¸µì— ì†í•˜ëŠ” ëª¨ë“  ìì‹ í´ë˜ìŠ¤ê°€ ì¶”ìƒ ë©”ì„œë“œë¥¼ ì˜¤ë²„ë¼ì´ë”©í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.
 
```java
public abstract class Phone {
  // ...

  protected Money afterCalculated(Money fee) { // í›… ë©”ì„œë“œ
    return fee;
  }

  protected abstract Money calculateCallFee(Call call);
}
```
- ì´ì²˜ëŸ¼ ì¶”ìƒ ë©”ì„œë“œì™€ ë™ì¼í•˜ê²Œ ìì‹ í´ë˜ìŠ¤ì—ì„œ ì˜¤ë²„ë¼ì´ë”©í•  ì˜ë„ë¡œ ë©”ì„œë“œë¥¼ ì¶”ê°€í–ˆì§€ë§Œ í¸ì˜ë¥¼ ìœ„í•´ ê¸°ë³¸ êµ¬í˜„ì„ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ **í›… ë©”ì„œë“œ**(**hook method**)ë¼ê³  ë¶€ë¥¸ë‹¤.

- `TaxableRegularPhone`ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.

```java
public class TaxableRegularPhone extends RegularPhone {
  private double taxRate;

  public TaxableRegularPhone(Money amount, Duration seconds, double taxRate) {
    super(amount, seconds);
    this.taxRate = taxRate;
  }

  @Override
  public Money afterCalculated(Money fee) {
    return fee.plus(fee.times(taxRate));
}
```

- ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œì¸ `NightDiscountPhone`ì—ë„ ì„¸ê¸ˆì„ ë¶€ê³¼í•  ìˆ˜ ìˆë„ë¡ `TaxableNightDiscountPhone`ì„ ì¶”ê°€í•œë‹¤.

```java
public class TaxableNightDiscountPhone extends NightlyDiscountPhone {
  private double taxRate;

  public TaxableNightDiscountPhone(Money nightlyAmount, Money regularAmount, Duration seconds, double taxRate) {
    super(nightlyAmount, regularAmount, seconds);
    this.taxRate = taxRate;
  }

  @Override
  public Money afterCalculated(Money fee) {
    return fee.plus(fee.times(taxRate));
}
```

- ë¬¸ì œëŠ” `TaxableNightDiscountPhone`ê³¼ `TaxableRegularPhone` ì‚¬ì´ì— ì½”ë“œë¥¼ ì¤‘ë³µí–ˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë‘ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ë³´ë©´ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ì´ë¦„ì„ ì œì™¸í•˜ë©´ ëŒ€ë¶€ë¶„ ì½”ë“œê°€ ê±°ì˜ ë™ì¼í•˜ë‹¤.
- ëŒ€ë¶€ë¶„ì˜ ê°ì²´ì§€í–¥ ì–¸ì–´ëŠ” ë‹¨ì¼ ìƒì†ë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ìƒì†ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ì¤‘ë³µ ì½”ë“œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸°ê°€ ì‰½ì§€ ì•Šë‹¤.

### ğŸˆ ê¸°ë³¸ ì •ì±…ì— ê¸°ë³¸ ìš”ê¸ˆ í• ì¸ ì •ì±… ì¡°í•©í•˜ê¸°
- ë‘ ë²ˆì§¸ ë¶€ê°€ ì •ì±…ì¸ ê¸°ë³¸ ìš”ê¸ˆ í• ì¸ ì •ì±…ì„ `Phone`ì˜ ìƒì† ê³„ì¸µì— ì¶”ê°€í•´ë³¸ë‹¤.
- ì¼ë°˜ ìš”ê¸ˆì œì™€ ê¸°ë³¸ ìš”ê¸ˆ í• ì¸ ì •ì±…ì„ ì¡°í•©í•˜ê³  ì‹¶ìœ¼ë©´ `RegularPhone`ì„ ìƒì†ë°›ì€ `RateDiscountableRegularPhone` í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•œë‹¤.

```java
public class RateDiscountableRegularPhone extends RegularPhone {
  private Money discountAmount;

  public RateDiscountableRegularPhone(Money amount, Duration seconds, Money discountAmount) {
    super(amount, seconds);
    this.discountAmount = discountAmount;
  }

  @Override
  public Money afterCalculated(Money fee) {
    return fee.minus(discountAmount);
}
```

- ì‹¬ì•¼ í• ì¸ ìš”ê¸ˆì œì™€ ê¸°ë³¸ ìš”ê¸ˆ í• ì¸ ì •ì±…ì„ ì¡°í•©í•˜ê³  ì‹¶ìœ¼ë©´ `NightlyDiscountPhone`ì„ ìƒì†ë°›ëŠ” `RateDiscountableNightlyDiscountPhone` í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ë©´ ëœë‹¤.

```java
public class RateDiscountableNightlyDiscountPhone extends NightlyDiscountPhone {
  private Money discountAmount;

  public RateDiscountableNightlyDiscountPhone(Money nightlyAmount, Money regularAmount, Duration seconds, Money discountAmount) {
    super(nightlyAmount, regularAmount, seconds);
    this.discountAmount = discountAmount;
  }

  @Override
  public Money afterCalculated(Money fee) {
    return fee.minus(discountAmount);
}
```

- ì´ë²ˆì—ë„ ë¶€ê°€ ì •ì±…ì„ êµ¬í˜„í•œ `RateDiscountableNightlyDiscountPhone` í´ë˜ìŠ¤ì™€ `RateDiscountableRegularPhone` í´ë˜ìŠ¤ ì‚¬ì´ì— ì¤‘ë³µ ì½”ë“œë¥¼ ì¶”ê°€í–ˆë‹¤.

### ğŸˆ ì¤‘ë³µ ì½”ë“œì˜ ë«ì— ê±¸ë¦¬ë‹¤
- ë¶€ê°€ ì •ì±…ì€ ììœ ë¡­ê²Œ ì¡°í•©í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê³  ì ìš©ë˜ëŠ” ìˆœì„œ ì—­ì‹œ ì„ì˜ë¡œ ê²°ì •í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.
- ìƒì†ì„ ì´ìš©í•œ í•´ê²° ë°©ë²•ì€ ëª¨ë“  ê°€ëŠ¥í•œ ì¡°í•©ë³„ë¡œ ìì‹ í´ë˜ìŠ¤ë¥¼ í•˜ë‚˜ì”© ì¶”ê°€í•˜ëŠ” ê²ƒì´ë‹¤. êµ‰ì¥íˆ ë³µì¡í•´ì§ˆ ê²ƒì´ë‹¤.
- í•˜ì§€ë§Œ ë³µì¡ì„±ë³´ë‹¤ ë” í° ë¬¸ì œëŠ” ë°”ë¡œ ìƒˆë¡œìš´ ì •ì±…ì„ ì¶”ê°€í•˜ê¸°ê°€ ì–´ë µë‹¤ëŠ” ê²ƒì´ë‹¤.
- í˜„ì¬ì˜ ì„¤ê³„ì— ìƒˆë¡œìš´ ì •ì±…ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œëŠ” ë¶ˆí•„ìš”í•œ ë§ì€ ìˆ˜ì˜ í´ë˜ìŠ¤ë¥¼ ìƒì† ê³„ì¸µ ì•ˆì— ì¶”ê°€í•´ì•¼ í•œë‹¤.
- ìƒì†ì˜ ë‚¨ìš©ìœ¼ë¡œ í•˜ë‚˜ì˜ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê¸° ìœ„í•´ í•„ìš” ì´ìƒìœ¼ë¡œ ë§ì€ ìˆ˜ì˜ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•´ì•¼í•˜ëŠ” ê²½ìš°ë¥¼ ê°€ë¦¬ì¼œ **í´ë˜ìŠ¤ í­ë°œ**(**class explosion**) ë¬¸ì œ ë˜ëŠ” **ì¡°í•©ì˜ í­ë°œ**(**combinational explosion**) ë¬¸ì œë¼ê³  ë¶€ë¥¸ë‹¤.
- í´ë˜ìŠ¤ í­ë°œ ë¬¸ì œëŠ” ìì‹ í´ë˜ìŠ¤ê°€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ êµ¬í˜„ì— ê°•í•˜ê²Œ ê²°í•©ë˜ë„ë¡ ê°•ìš”í•˜ëŠ” ìƒì†ì˜ ê·¼ë³¸ì ì¸ í•œê³„ ë–„ë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œë‹¤. ì»´íŒŒì¼íƒ€ì„ì— ê²°ì •ëœ ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ ì‚¬ì´ì˜ ê´€ê³„ëŠ” ë³€ê²½ë  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ìì‹ í´ë˜ìŠ¤ì™€ ë¶€ëª¨ í´ë˜ìŠ¤ì˜ ë‹¤ì–‘í•œ ì¡°í•©ì´ í•„ìš”í•œ ìƒí™©ì—ì„œ ìœ ì¼í•œ í•´ê²° ë°©ë²•ì€ ì¡°í•©ì˜ ìˆ˜ë§Œí¼ ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒë¿ì´ë‹¤.
- í´ë˜ìŠ¤ í­ë°œ ë¬¸ì œëŠ” ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•  ë•Œë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ëŠ¥ì„ ìˆ˜ì •í•  ë–„ë„ ë¬¸ì œê°€ ëœë‹¤. ë§Œì•½ ì„¸ê¸ˆ ì •ì±…ì´ ë³€ê²½ëœë‹¤ë©´ ê´€ë ¨ëœ ì½”ë“œê°€ ì—¬ëŸ¬ í´ë˜ìŠ¤ ì•ˆì— ì¤‘ë³µë¼ ìˆê¸° ë•Œë¬¸ì— ëª¨ë‘ ì°¾ì•„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•œë‹¤.
- ì´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ìµœì„ ì˜ ë°©ë²•ì€ ìƒì†ì„ í¬ê¸°í•˜ëŠ” ê²ƒì´ë‹¤.