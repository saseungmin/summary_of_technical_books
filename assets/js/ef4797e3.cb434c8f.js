"use strict";(self.webpackChunkreading_books_record_repository=self.webpackChunkreading_books_record_repository||[]).push([[3668],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>v});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),u=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=u(e.components);return r.createElement(o.Provider,{value:n},e.children)},l={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),d=u(t),v=a,m=d["".concat(o,".").concat(v)]||d[v]||l[v]||i;return t?r.createElement(m,s(s({ref:n},p),{},{components:t})):r.createElement(m,s({ref:n},p))}));function v(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,s=new Array(i);s[0]=d;var c={};for(var o in n)hasOwnProperty.call(n,o)&&(c[o]=n[o]);c.originalType=e,c.mdxType="string"==typeof e?e:a,s[1]=c;for(var u=2;u<i;u++)s[u]=t[u];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},1742:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>v,frontMatter:()=>c,metadata:()=>u,toc:()=>l});var r=t(3117),a=t(102),i=(t(7294),t(3905)),s=["components"],c={sidebar_position:9},o="\ud83c\udf08 Chapter 8: \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud328\ud134",u={unversionedId:"javascript/javascript-pattern-and-test/chapter-8",id:"javascript/javascript-pattern-and-test/chapter-8",title:"\ud83c\udf08 Chapter 8: \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud328\ud134",description:"\ud83d\udcda \ub2e8\uc704 \ud14c\uc2a4\ud2b8",source:"@site/docs/javascript/javascript-pattern-and-test/chapter-8.md",sourceDirName:"javascript/javascript-pattern-and-test",slug:"/javascript/javascript-pattern-and-test/chapter-8",permalink:"/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-8",draft:!1,editUrl:"https://github.com/saseungmin/reading_books_record_repository/tree/master/docs/javascript/javascript-pattern-and-test/chapter-8.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"\ud83c\udf08 Chapter 7: \ubd80\ubd84 \uc801\uc6a9 \ud568\uc218",permalink:"/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-7"},next:{title:"\ud83c\udf08 Chapter 9: \uc2f1\uae00\ud1a4 \ud328\ud134",permalink:"/reading_books_record_repository/docs/javascript/javascript-pattern-and-test/chapter-9"}},p={},l=[{value:"\ud83d\udcda \ub2e8\uc704 \ud14c\uc2a4\ud2b8",id:"-\ub2e8\uc704-\ud14c\uc2a4\ud2b8",level:2},{value:"\ud83d\udcda AOP\ub85c \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ucd94\uac00\ud558\uae30",id:"-aop\ub85c-\uba54\ubaa8\uc774\uc81c\uc774\uc158-\ucd94\uac00\ud558\uae30",level:2},{value:"\ud83c\udf88 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \uc560\uc2a4\ud329\ud2b8 \uc0dd\uc131\ud558\uae30",id:"-\uba54\ubaa8\uc774\uc81c\uc774\uc158-\uc560\uc2a4\ud329\ud2b8-\uc0dd\uc131\ud558\uae30",level:3},{value:"\ud83c\udf88 returnValueCache \uc560\uc2a4\ud329\ud2b8\ub97c restaurantApi\uc5d0 \uc801\uc6a9\ud558\uae30",id:"-returnvaluecache-\uc560\uc2a4\ud329\ud2b8\ub97c-restaurantapi\uc5d0-\uc801\uc6a9\ud558\uae30",level:3},{value:"\ud83d\udcda \uc815\ub9ac\ud558\uae30",id:"-\uc815\ub9ac\ud558\uae30",level:2}],d={toc:l};function v(e){var n=e.components,t=(0,a.Z)(e,s);return(0,i.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"-chapter-8-\uba54\ubaa8\uc774\uc81c\uc774\uc158-\ud328\ud134"},"\ud83c\udf08 Chapter 8: \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud328\ud134"),(0,i.kt)("h2",{id:"-\ub2e8\uc704-\ud14c\uc2a4\ud2b8"},"\ud83d\udcda \ub2e8\uc704 \ud14c\uc2a4\ud2b8"),(0,i.kt)("p",null,"TDD\ub97c \uc2e4\ucc9c \uc911\uc778 \uc2b9\ud604\uc774\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"memoizedRestaurantApi")," \ud37c\uc0ac\ub4dc\ub97c \uad6c\ud604\ud558\uae30 \uc704\ud574 \uac00\uc7a5 \uba3c\uc800 \ud560 \uc77c\uc740 \ub2e8\uc704 \ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\ub294 \uac83\uc774\ub2e4. \uc2b9\ud604\uc740 \uc0ec\ub7ff\uc774 UI\ub97c \uc790\uc8fc \uace0\uce58\uc9c0 \uc54a\ub3c4\ub85d \uc0ec\ub7ff\uc774 \uc0ac\uc6a9\ud560 \ud568\uc218\uc640 \uac19\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsNearConference")," \ud568\uc218\ub97c \uc560\uc2a4\ud329\ud2b8\uac00 \uac00\ubbf8\ub41c \uc11c\ub4dc\ud30c\ud2f0 API\uc5d0 \ud45c\ucd9c\ud558\uae30\ub85c \ud55c\ub2e4.   "),(0,i.kt)("p",null,"\uc55e\uc11c \uc11c\ub4dc\ud30c\ud2f0 API\ub97c \ud655\uc7a5\ud558\uc5ec ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsNearConference")," \uba54\uc11c\ub4dc\ub97c \ucd94\uac00\ud55c \ucf54\ub4dc\uc758 \ub2e8\uc704\ud14c\uc2a4\ud2b8\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c, API\uac00 \uc2e4\uc81c\ub85c \ubc18\ud658\ud55c \uac1d\uccb4\uc758 \ud0c0\uc785\uc740 \uc2e0\uacbd \uc4f8 \ud544\uc694\uac00 \uc5c6\ub2e4. \ub530\ub77c\uc11c \ud504\ub77c\ubbf8\uc2a4\ub97c \uc4f4 \ube44\ub3d9\uae30 \ucf54\ub4dc \ud14c\uc2a4\ud2b8\uc758 \uc790\uc9c8\uad6c\ub808\ud55c \uc694\uc18c \ub54c\ubb38\uc5d0 \uc5bd\ub9e4\uc774\uc9c0 \uc54a\uc544\ub3c4 \ub41c\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"describe('memoizedRestaurantApi', () => {\n  'use strict';\n\n  var api;\n  var service;\n  var returnedFromService;\n\n  beforeEach(() => {\n    api = ThirdParty.restaurantApi();\n    service = Conference.memoizedRestaurantApi(api);\n    returnedFromService = {};\n  });\n\n  describe('getRestaurantsNearConference(cuisine)', () => {\n    it('\uae30\ub300 \uc778\uc790\ub97c \ub118\uaca8 api\uc758 getRestaurantsNearConference\ub97c \uc2e4\ud589', () => {\n      var cuisine = '\ubd84\uc2dd';\n      spyOn(api, 'getRestaurantsNearConference');\n      service.getRestaurantsNearConference(cuisine);\n      var args = api.getRestaurantsNearConference.calls.argsFor(0);\n      expect(args[0]).toEqual(cuisine);\n    });\n\n    it('\uc11c\ub4dc\ud30c\ud2f0 API\uc758 \ubc18\ud658\uac12\uc744 \ubc18\ud658\ud55c\ub2e4', () => {\n      spyOn(api, 'getRestaurantsNearConference').and.returnValue(returnedFromService);\n\n      var value = service.getRestaurantsNearConference('Asian Fusion');\n      expect(value).toBe(returnedFromService);\n    });\n\n    it('\uac19\uc740 \uc694\ub9ac\ub97c \uc5ec\ub7ec \ubc88 \uc694\uccad\ud574\ub3c4 api\ub294 \ud55c \ubc88\ub9cc \uc694\uccad\ud55c\ub2e4', () => {\n      var cuisine = '\ubd84\uc2dd';\n\n      spyOn(api, 'getRestaurantsNearConference').and.returnValue(returnedFromService);\n\n      var iterations = 5;\n      for (var i = 0; i < iterations; i++) {\n        var value = service.getRestaurantsNearConference(cuisine);\n      }\n\n      expect(api.getRestaurantsNearConference.calls.count()).toBe(1);\n    });\n\n    it('\uac19\uc740 \uc694\ub9ac\ub97c \uc5ec\ub7ec \ubc88 \uc694\uccad\ud574\ub3c4 \uac19\uc740 \uac12\uc73c\ub85c \uadc0\uacb0\ub41c\ub2e4', () => {\n      var cuisine = '\ud55c\uc815\uc2dd';\n\n      spyOn(api, 'getRestaurantsNearConference').and.returnValue(returnedFromService);\n\n      var iterations = 5;\n      for (var i = 0; i < iterations; i++) {\n        var value = service.getRestaurantsNearConference(cuisine);\n        expect(value).toBe(returnedFromService);\n      }\n    });\n  });\n});\n")),(0,i.kt)("p",null,"\uc774\uc5b4\uc11c \uad6c\ud604\ubd80\ub97c \uc791\uc131\ud55c\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"var Conference = Conference || {};\n\nConference.memoizedRestaurantApi = function(thirdPartyApi) {\n  'use strict';\n\n  var api = thirdPartyApi;\n  var cache = {};\n\n  return {\n    getRestaurantsNearConference: function(cuisine) {\n      // \ud0a4\uc6cc\ub4dc cuisine\uc5d0 \ud574\ub2f9\ud558\ub294 \ud0a4\uac00 \uce90\uc2dc\uc5d0 \uc788\ub294\uc9c0 \ucc3e\uc544\ubcf4\uace0, \uc788\uc73c\uba74 \uce90\uc2dc\ub41c \ud504\ub77c\ubbf8\uc2a4\ub97c \uc989\uc2dc \ubc18\ud658\ud55c\ub2e4.\n      if (cache.hasOwnProperty(cuisine)) {\n        return cache[cuisine];\n      }\n\n      // \uce90\uc2dc\uc5d0 \uc5c6\uc73c\uba74 \uc11c\ub4dc\ud30c\ud2f0 API\uc5d0 \uc694\uccad \ud6c4 \uc804\ub2ec\ubc1b\uc740 \ud504\ub77c\ubbf8\uc2a4\ub97c\n      // cache[cuisine] = returnedPromise;\ub85c \uce90\uc2dc\uc5d0 \ucd94\uac00\ud55c \ub4a4 \ud638\ucd9c\ubd80\uc5d0 \ud504\ub77c\ubbf8\uc2a4\ub97c \ub118\uaca8\uc900\ub2e4.\n      var returnedPromise = api.getRestaurantsNearConference(cuisine);\n      cache[cuisine] = returnedPromise;\n      return returnedPromise;\n    }\n  }\n}\n")),(0,i.kt)("p",null,"\uba54\ubaa8\uc774\uc81c\uc774\uc158 \uae30\ub2a5 \ub355\ubd84\uc5d0 ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsNearConference")," \ud568\uc218\ub294 API \ud638\ucd9c \ud69f\uc218\ub97c \uc904\uc77c \uc218 \uc788\ub2e4. \uc11c\ub4dc\ud30c\ud2f0 ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi"),"\ub97c \uc774\uc6a9\ud55c \uc9c0\uc810\uc5d0 \ub2ec\ub791 ",(0,i.kt)("inlineCode",{parentName:"p"},"memoizedRestaurantApi"),"\ub9cc \ucd94\uac00\ud558\uba74 \ub418\ub2c8\uae4c \uc548\ub3c4\ud588\ub358 \uc0ec\ub7ff\uc774 \uc2b9\ud604\uc5d0\uac8c \ud55c \uac00\uc9c0 \ub354 \uc81c\uc548\ud55c\ub2e4.   "),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"\uc0ec\ub7ff: \uc2b9\ud604, \ub124\uac00 ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsNearConference"),"\ub97c \ub123\uc73c\ub7ec\uace0 \ud655\uc7a5\ud588\ub4ef\uc774 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \uae30\ub2a5\uc744 \uac16\ucd98 \uc560\uc2a4\ud329\ud2b8\ub85c ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi"),"\ub97c \ud655\uc7a5\ud560 \ubc29\ubc95\uc740 \uc5c6\uc744\uae4c?",(0,i.kt)("br",{parentName:"p"}),"\n","\uc2b9\ud604: \uc5b4, \uac00\ub2a5\ud574. ",(0,i.kt)("inlineCode",{parentName:"p"},"memoizedRestaurantApi")," \uc5c6\uc774 \ub2e4\ub978 \ub370\uc11c\ub3c4 \ud544\uc694\ud558\uba74 \uc5bc\ub9c8\ub4e0\uc9c0 \uc4f8 \uc218 \uc788\ub294 \ubc94\uc6a9 ",(0,i.kt)("inlineCode",{parentName:"p"},"memoization")," \uc560\uc2a4\ud329\ud2b8\ub97c \ub9cc\ub4e4 \uc218 \uc788\uc744 \uac70\uc57c.")),(0,i.kt)("h2",{id:"-aop\ub85c-\uba54\ubaa8\uc774\uc81c\uc774\uc158-\ucd94\uac00\ud558\uae30"},"\ud83d\udcda AOP\ub85c \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ucd94\uac00\ud558\uae30"),(0,i.kt)("h3",{id:"-\uba54\ubaa8\uc774\uc81c\uc774\uc158-\uc560\uc2a4\ud329\ud2b8-\uc0dd\uc131\ud558\uae30"},"\ud83c\udf88 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \uc560\uc2a4\ud329\ud2b8 \uc0dd\uc131\ud558\uae30"),(0,i.kt)("p",null,"\uc2b9\ud604\uc758 \ub2e4\uc74c \ubaa9\ud45c\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi"),"\ucc98\ub7fc \ub2e4\ub978 \ucf54\ub4dc\uc5d0\uc11c\ub3c4 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ub355\uc744 \ubcf4\uac8c\ub054 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ucf54\ub4dc\ub97c \uc804 \uc608\uc81c ",(0,i.kt)("inlineCode",{parentName:"p"},"memoizedRestaurantApi"),"\uc5d0\uc11c \ucd94\ucd9c\ud558\uc5ec \uc560\uc2a4\ud329\ud2b8\ub85c \uc62e\uae30\ub294 \uac83\uc774\ub2e4.   "),(0,i.kt)("p",null,"\ub2e8\uc704 \ud14c\uc2a4\ud2b8\ub97c \uba3c\uc800 \uc791\uc131\ud55c\ub2e4. ",(0,i.kt)("inlineCode",{parentName:"p"},"returnValueCache"),"\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"advice"),"\ud568\uc218 \ud558\ub098\ub97c \uc815\uc758\ud55c \ubaa8\ub4c8\ub85c \uad6c\ud604\ub41c\ub2e4. ",(0,i.kt)("inlineCode",{parentName:"p"},"beforeEach")," \ube14\ub85d\uc758 \ub2e4\uc74c \ubb38\uc744 \uc2e4\ud589\ud558\uba74 ",(0,i.kt)("inlineCode",{parentName:"p"},"testFunction"),"\uc744 \uc5b4\ub4dc\ubc14\uc774\uc2a4\ub85c \uc7a5\uc2dd\ud55c\ub2e4.   "),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"Aop.around('testFunction', Aspects.returnValueCache().advice, testObject);\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"describe('returnValueCache', () => {\n  'use strict';\n\n  var testObject;\n  var testValue;\n  var args;\n  var spyReference;\n  var testFunctionExecutionCount;\n\n  beforeEach(() => {\n    // \ud14c\uc2a4\ud2b8\ud560 \ub54c\ub9c8\ub2e4 \uc6b0\uc120 \uc2e4\ud589 \ud69f\uc218\ub97c \ucd08\uae30\ud654\ud55c\ub2e4.\n    testFunctionExecutionCount = 0;\n    testValue = {};\n    testObject = {\n      testFunction: function(arg) {\n        return testValue;\n      }\n    };\n\n    spyOn(testObject, 'testFunction').and.callThrough();\n    // \uc560\uc2a4\ud329\ud2b8\uac00 \uc801\uc6a9\ub41c \uc774\ud6c4\uc5d0\ub294\n    // \uc2a4\ud30c\uc774\ub97c \uc9c1\uc811 \ucc38\uc870\ud560 \uc218 \uc5c6\uc73c\ubbc0\ub85c \ud604\uc7ac \ucc38\uc870\uac12\uc744 \ubcf4\uad00\ud574\ub454\ub2e4.\n    spyReference = testObject.testFunction;\n\n    // testObject.testFunction\uc744 returnValueCache \uc560\uc2a4\ud329\ud2b8\ub85c \uc7a5\uc2dd\ud55c\ub2e4.\n    Aop.around('testFunction', Aspects.returnValueCache().advice, testObject);\n\n    args = [{ key: 'value' }, 'someValue'];\n  });\n\n  describe('advice(targetInfo)', () => {\n    it('\uccab \ubc88\uc9f8 \uc2e4\ud589 \uc2dc \uc7a5\uc2dd\ub41c \ud568\uc218\uc758 \ubc18\ud658\uac12\uc744 \ubc18\ud658\ud55c\ub2e4', () => {\n      var value = testObject.tetFunction.apply(testObject, args);\n      expect(value).toBe(testValue);\n    });\n\n    it('\uc5ec\ub7ec \ubc88 \uc2e4\ud589 \uc2dc \uc7a5\uc2dd\ub41c \ud568\uc218\uc758 \ubc18\ud658\uac12\uc744 \ubc18\ud658\ud55c\ub2e4', () => {\n      var iterations = 3;\n      \n      for (var i = 0; i < iterations; i++) {\n        var value = testObject.testFunction.apply(testObject, args);\n        expect(value).toBe(testValue);\n      }\n    });\n\n    it('\uac19\uc740 \ud0a4\uac12\uc73c\ub85c \uc5ec\ub7ec \ubc88 \uc2e4\ud589\ud574\ub3c4 \uc7a5\uc2dd\ub41c \ud568\uc218\ub9cc \uc2e4\ud589\ud55c\ub2e4', () => {\n      var iterations = 3;\n\n      for (var i = 0; i < iterations; i++)  {\n        var value = testObject.testFunction.apply(testObject, args);\n        expect(value).toBe(testValue);\n      }\n\n      expect(spyReference.calls.count()).toBe(1);\n    });\n\n    it('\uace0\uc720\ud55c \uac01 \ud0a4\uac12\ub9c8\ub2e4 \uaf2d \ud55c \ubc88\uc529 \uc7a5\uc2dd\ub41c \ud568\uc218\ub97c \uc2e4\ud589\ud55c\ub2e4', () => {\n      var keyValues = ['value1', 'value2', 'value3'];\n\n      keyValues.forEach(function iterator(arg) {\n        var value = testObject.testFunction(arg);\n      });\n\n      // \uc694\uccad\uc744 \uac01\uac01 \ub2e4\uc2dc \uc2e4\ud589\ud55c\ub2e4. \uacb0\uacfc\ub294 \uce90\uc2dc\uc5d0\uc11c \uac00\uc838\uc624\ubbc0\ub85c \uc7a5\uc2dd\ub41c \ud568\uc218\ub97c \uc2e4\ud589\ud558\uc9c0 \uc54a\ub294\ub2e4.\n      keyValues.forEach(function iterator(arg) {\n        var value = testObject.testFunction(arg);\n      });\n\n      // \uc7a5\uc2dd\ub41c \ud568\uc218\ub294 \uace0\uc733\uac12 \ud558\ub098\ub2f9 \uaf2d \ud55c \ubc88\uc529 \uc2e4\ud589\ub418\uc5b4\uc57c \ud55c\ub2e4.\n      expect(spyReference.calls.count()).toBe(keyValues.length);\n    });\n\n    // \uce90\uc2dc \ud0a4\uac00 \uc815\ud655\ud788 \uacc4\uc0b0\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\ud558\ub294 \ucd94\uac00 \ud14c\uc2a4\ud2b8 \ub4f1\ub4f1...\n  });\n});\n")),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"testObject.testFunction"),"\uc5d0 \uc2a4\ud30c\uc774\ub97c \uc2ec\uace0\uc11c \uc774 \ud568\uc218\uc5d0 \uc560\uc2a4\ud329\ud2b8\ub97c \uc801\uc6a9\ud55c\ub2e4. \uc2a4\ud30c\uc774\uac00 \uc2e4\ud589\ub410\ub294\uc9c0 \ud655\uc778\ud558\ub824\uace0 \ud558\uae30 \uc804\uae4c\uc9c4 \ub9cc\uc0ac \uc21c\uc870\ub86d\uac8c \ud758\ub7ec\uac08 \uac83\uc774\ub2e4.   "),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"testObject.testFunction"),"\uc5d0 \ub454 \uc2a4\ud30c\uc774\ub294 \uc774 \ud568\uc218\ub97c \uc560\uc2a4\ud329\ud2b8\ub85c \uc7a5\uc2dd\ud558\ub294 \uc21c\uac00 \uc885\uc801\uc744 \uac10\ucd9c \uac83\uc774\ub2e4. \ub530\ub77c\uc11c \ub2e4\uc74c \uae30\ub300\uc2dd\uc5d0\uc11c ",(0,i.kt)("inlineCode",{parentName:"p"},"calls"),"\ub294 \uc774\uc81c ",(0,i.kt)("inlineCode",{parentName:"p"},"testObject.testFunction")," \ud504\ub85c\ud37c\ud2f0\uac00 \uc544\ub2c8\uc5b4\uc11c \uc2e4\ud328\ud55c\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"expect(testObject.testFunction.calls.count()).toBe(1);\n")),(0,i.kt)("p",null,"\ud568\uc218\uc5d0 \uc560\uc2a4\ud329\ud2b8\ub97c \uc801\uc6a9\ud558\uae30 \uc804, \ubcf8\ud568\uc218\uc758 \ucc38\uc870\uac12\uc744 ",(0,i.kt)("inlineCode",{parentName:"p"},"spyReference"),"\uc5d0 \ubcf4\uad00\ud558\uc5ec \ud574\uacb0\ud588\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"expect(spyReference.calls.count()).toBe(1);\n")),(0,i.kt)("p",null,"\ub2e4\uc74c\uc740 ",(0,i.kt)("inlineCode",{parentName:"p"},"returnValueCache")," \uad6c\ud604\ubd80\uc774\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"var Aspects = Aspects || {};\n\nAspects.returnValueCache = function() {\n  'use strict';\n\n  var cache = {};\n\n  return {\n    advice: function(targetInfo) {\n      // \ud568\uc218\uc5d0 \ub118\uae34 \uc778\uc790\ub97c \uce90\uc2dc \ud0a4\ub85c \uc774\uc6a9\ud55c\ub2e4.\n      // (\uac1d\uccb4 \ucc38\uc870\uac12 \ube44\uad50\uac00 \uc544\ub2cc, \ubb38\uc790\uc5f4 \ube44\uad50\ub97c \ud558\uae30 \uc704\ud574 \ubb38\uc790\uc5f4\ub85c \ubc14\uafbc\ub2e4).\n      var cacheKey = JSON.stringify(targetInfo.args);\n\n      if (cache.hasOwnProperty(cacheKey)) {\n        return cache[cacheKey];\n      }\n\n      // \uc7a5\uc2dd\ub41c \ud568\uc218\ub97c \uac00\uc838\uc640 \uc2e4\ud589\ud55c \ub4a4 \uadf8 \ubc18\ud658\uac12\uc744 \uce90\uc2dc\uc5d0 \uc800\uc7a5\ud55c\ub2e4.\n      var returnValue = Aop.next(targetInfo);\n      cache[cacheKey] = returnValue;\n      return returnValue;\n    }\n  };\n};\n")),(0,i.kt)("h3",{id:"-returnvaluecache-\uc560\uc2a4\ud329\ud2b8\ub97c-restaurantapi\uc5d0-\uc801\uc6a9\ud558\uae30"},"\ud83c\udf88 returnValueCache \uc560\uc2a4\ud329\ud2b8\ub97c restaurantApi\uc5d0 \uc801\uc6a9\ud558\uae30"),(0,i.kt)("p",null,"\ub9c8\uc9c0\ub9c9\uc73c\ub85c ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi")," \uba54\uc11c\ub4dc\ub97c ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi")," \uc560\uc2a4\ud329\ud2b8\ub85c \uc7a5\uc2dd\ud55c\ub2e4. ",(0,i.kt)("inlineCode",{parentName:"p"},"restaurantApi")," \ud568\uc218\uc5d0 ",(0,i.kt)("inlineCode",{parentName:"p"},"returnValueCache")," \uc560\uc2a4\ud329\ud2b8\ub97c \uc9c1\uc811 \uc801\uc6a9\ud558\ub294 \uac8c \uc77c\ubc18\uc801\uc778 \ud574\uacb0\ucc45\uc774\ub2e4. \uadf8\ub798\uc57c ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsNearConference"),"\ub3c4 \uae30\uc5b5\ud558\uba74\uc11c ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsWithinRadius"),"\ub97c \uc4f0\ub294 \ub2e4\ub978 \ud568\uc218\uae4c\uc9c0 \uc790\ub3d9\uc73c\ub85c \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud61c\ud0dd\uc744 \ub204\ub9b4 \uc218 \uc788\ub2e4.   "),(0,i.kt)("p",null,"\ub2e4\uc74c \uc608\ub294 ",(0,i.kt)("inlineCode",{parentName:"p"},"getRestaurantsWithinRadius")," \ud568\uc218\ub97c \uae30\uc5b5\ud558\uac8c\ub054 ",(0,i.kt)("inlineCode",{parentName:"p"},"ThirdPartyRestaurantApiAspects.js"),"\ub97c \uc218\uc815\ud55c \ucf54\ub4dc\ub2e4."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// getRestaurantsWithinRadius\uc5d0 \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud328\ud134 \uc801\uc6a9\nAop.around(\n  // \ubc18\ud658\uac12\uc744 \uc218\uc815\ud574\uc57c \ud560 \ud568\uc218\n  'restaurantApi',\n  // \ubc18\ud658\uac12\uc744 \uc218\uc815\ud558\ub294 \ud568\uc218\n  function addMemoizationToGetRestaurantsWithinRadius(targetInfo) {\n    // ThirdParty.restaurantApi()\uac00 \ubc18\ud658\ud55c \uc6d0\ubcf8 API\n    var api = Aop.next.call(this, targetInfo);\n\n    // getRestaurantsWithinRadius \ud568\uc218\ub97c \uc7a5\uc2dd\ud558\uc5ec \uba54\ubaa8\uc774\uc81c\uc774\uc158 \ucd94\uac00\n    Aop.around('getRestaurantsWithinRadius',\n      Aspects.returnValueCache().advice, api);\n\n    // \uace0\uce5c API\ub97c \ubc18\ud658\ud55c\ub2e4.\n    return api;\n  },\n  ThirdParty\n);\n\n// ThirdParty.restaurantApi()\uc5d0 getRestaurantsNearConference \uba64\ubc84 \ucd94\uac00\nAop.around(\n  // \ubc18\ud658\uac12\uc744 \uc218\uc815\ud574\uc57c \ud560 \ud568\uc218\n  'restaurantApi',\n  // \ubc18\ud658\uac12\uc744 \uc218\uc815\ud558\ub294 \ud568\uc218\n  function addGetRestaurantsNearConference(targetInfo) {\n    'use strict';\n\n    // ThirdParty.restaurantApi()\uac00 \ubc18\ud658\ud55c \uc6d0\ubcf8 API\n    var api = Aop.next.call(this, targetInfo);\n\n    // API\uc5d0 \ucd94\uac00\ud560 \ud568\uc218\n    function getRestaurantsNearConference(cuisine) {\n      return api.getRestaurantsWithinRadius(\n        '\uc6b8\uc0b0 \ub0a8\uad6c \uc2e0\uc815\ub85c 20\ubc88\uae38 988', 2.0, cuisine\n      );\n    }\n\n    // \uc5c6\uc73c\uba70 \uc774 \ud568\uc218\ub97c \ucd94\uac00\ud55c\ub2e4.\n    api.getRestaurantsNearConference = \n      api.getRestaurantsNearConference || getRestaurantsNearConference;\n\n    // \uace0\uce5c API\ub97c \ubc18\ud658\ud55c\ub2e4.\n    return api;\n  },\n\n  // \ubc18\ud658\uac12\uc744 \uc218\uc815\ud574\uc57c \ud560 \ud568\uc218\uc758 \uc774\ub984\uacf5\uac04\n  ThirdParty\n);\n")),(0,i.kt)("h2",{id:"-\uc815\ub9ac\ud558\uae30"},"\ud83d\udcda \uc815\ub9ac\ud558\uae30"),(0,i.kt)("p",null,"\uba54\ubaa8\uc774\uc81c\uc774\uc158 \ud328\ud134 \uad6c\ud604 \uc2dc \ub2e4\uc74c \ub450 \uac00\uc9c0\ub97c \ub2e8\uc704 \ud14c\uc2a4\ud2b8\ub85c \uaf2d \ud655\uc778\ud558\ub77c."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"\ubc18\ud658\uac12\uc744 \uae30\uc5b5\ud560 \ud568\uc218 \ub610\ub294 \uc790\uc6d0\uc740 \uc5b4\ub5a4 \ud0a4\ub97c \uae30\uc900\uc73c\ub85c \ub9e8 \ucc98\uc74c \ud638\ucd9c\ud560 \ub54c \ud55c \ubc88\ub9cc \uc811\uadfc\ud55c\ub2e4."),(0,i.kt)("li",{parentName:"ul"},"\uadf8 \uc774\ud6c4\ub85c \uac19\uc740 \ud0a4\ub97c \uc778\uc790\ub85c \uae30\uc5b5\ud55c \ud568\uc218\ub97c \ub2e4\uc2dc \ud638\ucd9c\ud558\uba74 \ub9e8 \ucc98\uc74c \ud638\ucd9c\ud588\uc744 \ub54c\uc640 \uac19\uc740 \uac12\uc744 \ubc18\ud658\ud55c\ub2e4.")))}v.isMDXComponent=!0}}]);